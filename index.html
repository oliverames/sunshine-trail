<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Sunshine Trail | Lawson's Finest Liquids</title>
    <meta name="description" content="Explore Sunshine Spots from Waitsfield, VT to Asheville, NC. Interactive map of retailers, hiking trails, river put-ins, and community partners along the Appalachian corridor.">
    <meta name="theme-color" content="#2d2a26">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Lawson's Finest brand colors - extracted from website */
            --sunshine-gold: #EAC054;      /* Primary gold from "Explore" text & Beer Finder button */
            --sunshine-orange: #E87722;    /* Orange from sun logo */
            --sunshine-red: #C13A28;       /* Red accent from sun logo */
            --deep-brown: #2d2a26;         /* Logo text color */
            --forest-green: #3A5F3A;       /* Trail marker - earthy green */
            --river-blue: #4A90A4;         /* River marker - mountain stream blue */
            --community-purple: #7B5B9A;   /* Community marker - softer purple */
            --cream: #FFFBF2;              /* Warm cream background */
            --light-gold: #FDF5E6;         /* Light gold for highlights */
            --amber: #FCB900;              /* Luminous amber from site */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            background-color: var(--light-gold);
            color: var(--deep-brown);
        }

        header {
            background: #ffffff;
            color: var(--deep-brown);
            padding: 0.75rem 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid #e5e5e5;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .header-trail-logo {
            height: 55px;
            width: auto;
        }

        .brand-logo-link {
            display: flex;
            align-items: center;
        }

        .header-brand-logo {
            height: 38px;
            width: auto;
            opacity: 1;
            transition: opacity 0.2s;
        }

        .header-brand-logo:hover {
            opacity: 0.8;
        }

        h1 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 800;
            font-size: 1.6rem;
            letter-spacing: 0.5px;
            color: var(--deep-brown);
        }

        h1 span {
            color: var(--sunshine-gold);
        }

        .tagline {
            font-size: 0.8rem;
            color: #666;
            font-weight: 400;
            margin-top: 0.15rem;
        }

        .filter-icon {
            width: 28px;
            height: 28px;
            object-fit: contain;
        }

        main {
            display: flex;
            flex-direction: row;
        }

        .sidebar {
            width: 360px;
            flex-shrink: 0;
            background: white;
            padding: 1.5rem;
            overflow-y: visible;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }

        .sidebar h2 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: var(--deep-brown);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .intro-text {
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: 1.5rem;
            color: #555;
        }

        .filter-section {
            margin-bottom: 1.5rem;
        }

        .filter-section h3 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.75rem;
            color: var(--deep-brown);
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .filter-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 6px;
            transition: background-color 0.2s;
        }

        .filter-item:hover {
            background-color: var(--light-gold);
        }

        .filter-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--sunshine-gold);
        }

        .filter-item label {
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }


        .count-badge {
            background: var(--light-gold);
            padding: 0.15rem 0.5rem;
            border-radius: 10px;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--deep-brown);
        }

        .legend {
            background: var(--light-gold);
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
        }

        .legend h4 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 0.85rem;
            margin-bottom: 0.75rem;
        }

        .legend p {
            font-size: 0.8rem;
            line-height: 1.5;
            color: #555;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8rem;
            margin-bottom: 0.4rem;
        }

        #map {
            flex: 1;
            height: calc(100vh - 80px);
            min-height: 500px;
            position: relative;
            align-self: flex-start;
        }

        /* Smooth Leaflet transitions */
        .leaflet-tile-container {
            transform: translateZ(0);
            will-change: transform;
        }

        .leaflet-zoom-anim .leaflet-zoom-animated {
            transition: transform 0.25s cubic-bezier(0.25, 0.1, 0.25, 1);
        }

        .leaflet-pan-anim .leaflet-tile,
        .leaflet-pan-anim .leaflet-marker-pane {
            transition: transform 0.25s ease-out;
        }

        .leaflet-fade-anim .leaflet-popup {
            transition: opacity 0.2s ease-in-out;
        }

        /* Prevent marker icon distortion */
        .marker-icon {
            background: transparent !important;
        }

        /* Only apply hover effects on devices that support hover (not touch) */
        @media (hover: hover) and (pointer: fine) {
            .leaflet-marker-icon {
                transition: transform 0.15s ease-out, filter 0.15s ease-out;
                transform-origin: center bottom;
            }

            .leaflet-marker-icon:hover {
                transform: scale(1.1) translateY(-2px);
                filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3));
            }
        }

        /* Marker cluster styling */
        .marker-cluster {
            background: transparent;
        }

        .cluster-inner {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 12px;
            color: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            border: 2px solid white;
        }

        .cluster-brewery { background: #b45309; }
        .cluster-tastingroom { background: #dc2626; }
        .cluster-retailer { background: var(--sunshine-gold); color: var(--deep-brown); }
        .cluster-bar { background: #7c3aed; }
        .cluster-trail { background: var(--forest-green); }
        .cluster-river { background: var(--river-blue); }
        .cluster-community { background: var(--community-purple); }
        .cluster-charger { background: #22c55e; }

        /* Multi-category cluster */
        .cluster-multi {
            width: auto;
            min-width: 44px;
            height: 44px;
            border-radius: 22px;
            padding: 0 8px;
            background: white;
            display: flex;
            align-items: center;
            gap: 2px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.25);
            border: 2px solid var(--sunshine-gold);
        }

        .cluster-multi .cluster-count {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 11px;
            color: var(--deep-brown);
            margin-left: 4px;
        }

        .cluster-multi .cluster-icon {
            width: 22px;
            height: 22px;
            object-fit: contain;
        }

        /* Custom Leaflet popup styles */
        .leaflet-popup-content-wrapper {
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .leaflet-popup-content {
            margin: 12px 16px;
            font-family: 'Open Sans', sans-serif;
        }

        .popup-title {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 1rem;
            color: var(--deep-brown);
            margin-bottom: 0.5rem;
        }

        .popup-category {
            display: inline-block;
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
        }

        .popup-category.brewery { background: #b45309; color: white; }
        .popup-category.tastingroom { background: #dc2626; color: white; }
        .popup-category.retailer { background: var(--sunshine-gold); color: var(--deep-brown); }
        .popup-category.bar { background: #7c3aed; color: white; }
        .popup-category.trail { background: var(--forest-green); color: white; }
        .popup-category.river { background: var(--river-blue); color: white; }
        .popup-category.community { background: var(--community-purple); color: white; }
        .popup-category.charger { background: #22c55e; color: white; }

        .popup-content-wrapper {
            max-height: 400px;
            overflow-y: auto;
        }

        .popup-description {
            font-size: 0.85rem;
            line-height: 1.5;
            color: #555;
            margin-bottom: 0.5rem;
        }

        .popup-location {
            font-size: 0.8rem;
            color: #777;
        }

        .popup-link {
            display: inline-block;
            margin-top: 0.5rem;
            color: var(--river-blue);
            text-decoration: none;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .popup-link:hover {
            text-decoration: underline;
        }

        .popup-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: 6px;
            margin-bottom: 0.75rem;
        }

        .popup-impact {
            background: var(--light-gold);
            padding: 0.6rem;
            border-radius: 6px;
            margin: 0.5rem 0;
            font-size: 0.8rem;
            line-height: 1.5;
            border-left: 3px solid var(--sunshine-gold);
        }

        .popup-impact-label {
            font-weight: 600;
            color: var(--deep-brown);
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.25rem;
        }

        .popup-buttons {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .popup-btn {
            display: inline-block;
            padding: 0.4rem 0.75rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            text-decoration: none;
            text-align: center;
            flex: 1;
        }

        .popup-btn-primary {
            background: var(--sunshine-gold);
            color: var(--deep-brown);
        }

        .popup-btn-secondary {
            background: var(--deep-brown);
            color: var(--cream);
        }

        .popup-btn:hover {
            opacity: 0.9;
        }

        /* Custom marker styles */
        .leaflet-marker-icon {
            background: transparent !important;
            border: none !important;
            box-shadow: none !important;
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            main {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                padding: 1.5rem;
                order: 2;
                box-shadow: none;
            }

            #map {
                height: 55vh;
                min-height: 350px;
                order: 1;
            }

            header {
                flex-direction: column;
                text-align: center;
                gap: 0.75rem;
                padding: 0.75rem 1rem;
            }

            h1 {
                font-size: 1.3rem;
            }

            .header-trail-logo {
                height: 45px;
            }

            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.5rem;
            }

            .metric-item {
                margin: 0;
            }

            .metric-value {
                font-size: 1.2rem;
            }

            .metric-suffix {
                font-size: 0.7rem;
            }

            .bcorp-badge img {
                height: 60px;
            }

            .bottom-brand-logo {
                height: 45px;
            }
        }

        /* Larger desktop screens */
        @media (min-width: 1400px) {
            .metric-value {
                font-size: 1.8rem;
            }

            h1 {
                font-size: 1.8rem;
            }
        }

        /* Tablet screens */
        @media (min-width: 769px) and (max-width: 1024px) {
            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.5rem;
            }

            .metric-item {
                margin: 0;
            }
        }

        /* Zoom hint overlay */
        .zoom-hint {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(45, 42, 38, 0.9);
            color: var(--cream);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-family: 'Montserrat', sans-serif;
            font-size: 0.75rem;
            font-weight: 600;
            z-index: 1000;
            pointer-events: none;
            transition: opacity 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .zoom-hint.hidden {
            opacity: 0;
        }

        /* Bottom brand section */
        .bottom-brand {
            padding: 3rem 2rem;
            text-align: center;
            background: transparent;
        }

        .bottom-brand-link {
            display: inline-block;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        .bottom-brand-link:hover {
            transform: scale(1.05);
            opacity: 0.9;
        }

        .bottom-brand-logo {
            height: 60px;
            width: auto;
        }

        .bottom-brand-text {
            margin-top: 0.75rem;
            font-size: 0.85rem;
            color: var(--deep-brown);
            opacity: 0.8;
        }

        .bottom-brand-text a {
            color: var(--deep-brown);
            text-decoration: none;
            font-weight: 600;
        }

        .bottom-brand-text a:hover {
            text-decoration: underline;
        }
        /* Page Load Animations */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: scale(0.3);
            }
            50% {
                transform: scale(1.05);
            }
            70% {
                transform: scale(0.9);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -200% 0;
            }
            100% {
                background-position: 200% 0;
            }
        }

        /* Apply animations */
        header {
            animation: fadeInDown 0.6s ease-out;
        }

        .sidebar {
            animation: fadeInLeft 0.6s ease-out 0.2s both;
        }

        .intro-text {
            animation: fadeIn 0.8s ease-out 0.4s both;
        }

        .filter-section {
            animation: fadeInUp 0.6s ease-out 0.5s both;
        }

        .filter-item {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .filter-item:hover {
            transform: translateX(5px);
            background-color: var(--light-gold);
        }

        .filter-item:active {
            transform: translateX(2px) scale(0.98);
        }

        .legend {
            animation: fadeInUp 0.6s ease-out 0.7s both;
        }

        #map {
            animation: fadeIn 1s ease-out 0.3s both;
        }

        footer {
            animation: fadeInUp 0.5s ease-out 0.8s both;
        }

        /* Filter checkbox animation */
        .filter-item input[type="checkbox"] {
            transition: transform 0.2s ease;
        }

        .filter-item input[type="checkbox"]:checked {
            animation: pulse 0.3s ease;
        }

        /* Count badge animation */
        .count-badge {
            transition: all 0.3s ease;
        }

        .filter-item:hover .count-badge {
            background: var(--sunshine-gold);
            transform: scale(1.1);
        }

        /* Button hover effects */
        .popup-btn {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .popup-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .popup-btn:active {
            transform: translateY(0);
        }

        /* Logo hover effect */
        .header-trail-logo {
            transition: transform 0.3s ease;
        }

        .header-trail-logo:hover {
            transform: scale(1.05);
        }

        /* Shimmer effect for loading state */
        .loading {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }

        /* State Filter Buttons */
        .state-filter-section {
            margin-bottom: 1.5rem;
            animation: fadeInUp 0.6s ease-out 0.6s both;
        }

        .state-filter-section h3 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.75rem;
            color: var(--deep-brown);
        }

        .state-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .state-btn {
            padding: 0.4rem 0.75rem;
            border: 2px solid var(--community-purple);
            background: white;
            color: var(--community-purple);
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .state-btn:hover {
            background: var(--community-purple);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(123, 91, 154, 0.3);
        }

        .state-btn.active {
            background: var(--community-purple);
            color: white;
        }

        .state-btn.all-states {
            border-color: var(--sunshine-gold);
            color: var(--deep-brown);
        }

        .state-btn.all-states:hover,
        .state-btn.all-states.active {
            background: var(--sunshine-gold);
            color: var(--deep-brown);
        }

        /* Live Metrics Section - Styled like Lawson's website */
        .metrics-section {
            background: var(--sunshine-gold);
            padding: 1.5rem;
            border-radius: 16px;
            margin-bottom: 2rem;
            animation: fadeInUp 0.6s ease-out 0.65s both;
            box-shadow: 0 4px 20px rgba(234, 192, 84, 0.3);
        }

        .metrics-section-header {
            text-align: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid rgba(45, 42, 38, 0.15);
        }

        .metrics-section-header h3 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 800;
            font-size: 1.1rem;
            color: var(--deep-brown);
            text-transform: uppercase;
            letter-spacing: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            margin: 0 0 0.5rem 0;
        }

        .metrics-tagline {
            font-family: 'Open Sans', sans-serif;
            font-weight: 400;
            font-size: 0.9rem;
            font-style: italic;
            color: var(--deep-brown);
            opacity: 0.85;
            margin: 0;
            line-height: 1.4;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0;
        }

        .metric-item {
            text-align: center;
            padding: 1rem 0.5rem;
            background: rgba(255, 255, 255, 0.25);
            border-radius: 12px;
            margin: 0 0.25rem;
        }

        .metric-value {
            font-family: 'Montserrat', sans-serif;
            font-weight: 800;
            font-size: 1.5rem;
            color: var(--deep-brown);
            margin-bottom: 0.35rem;
            display: flex;
            justify-content: center;
            align-items: baseline;
            gap: 2px;
        }

        .metric-prefix {
            font-size: 1rem;
        }

        .metric-suffix {
            font-size: 0.8rem;
            font-weight: 600;
        }

        .metric-label {
            font-size: 0.7rem;
            color: var(--deep-brown);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
            opacity: 0.85;
        }

        .metric-number {
            display: inline-block;
            min-width: 1ch;
        }

        @keyframes countUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .metric-value.counting .metric-number {
            animation: countUp 0.1s ease-out;
        }

        /* Pulse dot for "live" indicator */
        .live-dot {
            width: 10px;
            height: 10px;
            background: #22c55e;
            border-radius: 50%;
            animation: livePulse 2s ease-in-out infinite;
            flex-shrink: 0;
        }

        @keyframes livePulse {
            0%, 100% {
                opacity: 1;
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7);
            }
            50% {
                opacity: 0.8;
                box-shadow: 0 0 0 8px rgba(34, 197, 94, 0);
            }
        }

        /* BCorp Section */
        .bcorp-section {
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 2px solid rgba(45, 42, 38, 0.15);
            text-align: center;
        }

        .bcorp-badge {
            display: inline-block;
            background: white;
            border-radius: 12px;
            padding: 1rem 1.5rem;
            box-shadow: 0 2px 12px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .bcorp-badge:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }

        .bcorp-badge img {
            height: 80px;
            width: auto;
        }

        /* Scenic Route Toggle */
        .route-toggle-section {
            margin-bottom: 1.5rem;
            animation: fadeInUp 0.6s ease-out 0.55s both;
        }

        .route-toggle-section h3 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.75rem;
            color: var(--deep-brown);
        }

        .route-toggle {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.6rem 0.75rem;
            background: linear-gradient(135deg, var(--sunshine-gold) 0%, var(--amber) 100%);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .route-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(234, 192, 84, 0.4);
        }

        .route-toggle input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--deep-brown);
        }

        .route-toggle label {
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--deep-brown);
        }

        .route-info {
            font-size: 0.75rem;
            color: #555;
            margin-top: 0.5rem;
            line-height: 1.4;
        }

        /* Route Legend */
        .route-legend {
            display: flex;
            flex-direction: column;
            gap: 0.4rem;
            margin-top: 0.75rem;
            padding: 0.75rem;
            background: var(--light-gold);
            border-radius: 6px;
        }

        .route-legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.75rem;
        }

        .route-line {
            width: 24px;
            height: 4px;
            border-radius: 2px;
        }

        .route-line.blue-ridge {
            background: linear-gradient(90deg, #2E86AB, #4ECDC4);
        }

        .route-line.skyline {
            background: linear-gradient(90deg, #7B68EE, #9370DB);
        }

        .route-line.route-100 {
            background: linear-gradient(90deg, #228B22, #32CD32);
        }

        .route-line.connector {
            background: #888;
            border-style: dashed;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo-section">
            <div>
                <h1>The <span>Sunshine</span> Trail</h1>
                <p class="tagline">Mountain communities. Outdoor adventures. Cold beer.</p>
            </div>
        </div>
    </header>

    <main>
        <aside class="sidebar">
            <p class="intro-text">
                Explore the <strong>Sunshine Spots</strong> from Waitsfield, Vermont to Asheville, North Carolina.
                Discover retailers, hiking trails, river put-ins, and the community organizations we support along the way.
            </p>

            <div class="metrics-section">
                <div class="metrics-section-header">
                    <h3><span class="live-dot"></span> Live Impact</h3>
                    <p class="metrics-tagline">We pour a little good back into every community we call home.</p>
                </div>
                <div class="metrics-grid">
                    <div class="metric-item">
                        <div class="metric-value" id="metric-donated">
                            <span class="metric-prefix">$</span>
                            <span class="metric-number" id="donations-counter">0</span>
                        </div>
                        <div class="metric-label">Dollars Raised</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value" id="metric-solar">
                            <span class="metric-number" id="solar-counter">0</span>
                            <span class="metric-suffix">kWh</span>
                        </div>
                        <div class="metric-label">Solar Generated</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value" id="metric-bcorp">
                            <span class="metric-number">83.6</span>
                        </div>
                        <div class="metric-label">B Impact Score</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value" id="metric-nonprofits">
                            <span class="metric-number">496</span>
                        </div>
                        <div class="metric-label">Nonprofits</div>
                    </div>
                </div>
                <div class="bcorp-section">
                    <a href="https://www.bcorporation.net/en-us/find-a-b-corp/company/lawsons-finest-liquids-llc/" target="_blank" rel="noopener noreferrer" class="bcorp-badge" title="Certified B Corporation">
                        <img src="assets/images/b-corp-logo.png" alt="Certified B Corporation">
                    </a>
                </div>
            </div>

            <div class="filter-section">
                <h3>Filter by Category</h3>
                <div class="filter-group">
                    <div class="filter-item">
                        <input type="checkbox" id="filter-breweries" checked>
                        <label for="filter-breweries">
                            <img src="assets/images/marker-brewery.svg" alt="" class="filter-icon">
                            Breweries
                            <span class="count-badge" id="count-breweries">0</span>
                        </label>
                    </div>
                    <div class="filter-item">
                        <input type="checkbox" id="filter-tastingrooms" checked>
                        <label for="filter-tastingrooms">
                            <img src="assets/images/marker-tastingroom.svg" alt="" class="filter-icon">
                            Tasting Rooms
                            <span class="count-badge" id="count-tastingrooms">0</span>
                        </label>
                    </div>
                    <div class="filter-item">
                        <input type="checkbox" id="filter-retailers" checked>
                        <label for="filter-retailers">
                            <img src="assets/images/marker-retailer.svg" alt="" class="filter-icon">
                            Retailers
                            <span class="count-badge" id="count-retailers">0</span>
                        </label>
                    </div>
                    <div class="filter-item">
                        <input type="checkbox" id="filter-bars" checked>
                        <label for="filter-bars">
                            <img src="assets/images/marker-bar.svg" alt="" class="filter-icon">
                            Bars & Restaurants
                            <span class="count-badge" id="count-bars">0</span>
                        </label>
                    </div>
                    <div class="filter-item">
                        <input type="checkbox" id="filter-trails" checked>
                        <label for="filter-trails">
                            <img src="assets/images/marker-trail.svg" alt="" class="filter-icon">
                            Trails
                            <span class="count-badge" id="count-trails">0</span>
                        </label>
                    </div>
                    <div class="filter-item">
                        <input type="checkbox" id="filter-rivers" checked>
                        <label for="filter-rivers">
                            <img src="assets/images/marker-river.svg" alt="" class="filter-icon">
                            River Put-ins
                            <span class="count-badge" id="count-rivers">0</span>
                        </label>
                    </div>
                    <div class="filter-item">
                        <input type="checkbox" id="filter-community" checked>
                        <label for="filter-community">
                            <img src="assets/images/marker-community.svg" alt="" class="filter-icon">
                            Community Partners
                            <span class="count-badge" id="count-community">0</span>
                        </label>
                    </div>
                    <div class="filter-item">
                        <input type="checkbox" id="filter-chargers" checked>
                        <label for="filter-chargers">
                            <img src="assets/images/marker-charger.svg" alt="" class="filter-icon">
                            DC Fast Chargers
                            <span class="count-badge" id="count-chargers">0</span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="route-toggle-section">
                <h3>Scenic Road Trip Route</h3>
                <div class="route-toggle">
                    <input type="checkbox" id="toggle-scenic-route">
                    <label for="toggle-scenic-route">Show The Sunshine Trail Route</label>
                </div>
                <p class="route-info">The ultimate road trip from Asheville, NC to Waitsfield, VT via America's most scenic mountain roads.</p>
                <div class="route-legend" id="route-legend" style="display: none;">
                    <div class="route-legend-item">
                        <span class="route-line blue-ridge"></span>
                        <span>Blue Ridge Parkway (469 mi)</span>
                    </div>
                    <div class="route-legend-item">
                        <span class="route-line skyline"></span>
                        <span>Skyline Drive (105 mi)</span>
                    </div>
                    <div class="route-legend-item">
                        <span class="route-line connector"></span>
                        <span>I-81 / US-7 Connector</span>
                    </div>
                    <div class="route-legend-item">
                        <span class="route-line route-100"></span>
                        <span>VT Route 100 (217 mi)</span>
                    </div>
                </div>
            </div>

            <div class="state-filter-section">
                <h3>Community Partners by State</h3>
                <div class="state-buttons">
                    <button class="state-btn all-states active" data-state="all">All States</button>
                    <button class="state-btn" data-state="VT">VT</button>
                    <button class="state-btn" data-state="NH">NH</button>
                    <button class="state-btn" data-state="ME">ME</button>
                    <button class="state-btn" data-state="MA">MA</button>
                    <button class="state-btn" data-state="RI">RI</button>
                    <button class="state-btn" data-state="CT">CT</button>
                    <button class="state-btn" data-state="NY">NY</button>
                    <button class="state-btn" data-state="NJ">NJ</button>
                    <button class="state-btn" data-state="PA">PA</button>
                    <button class="state-btn" data-state="VA">VA</button>
                    <button class="state-btn" data-state="NC">NC</button>
                </div>
            </div>

            <div class="legend">
                <h4>About This Trail</h4>
                <p>
                    The Sunshine Trail celebrates the shared culture of mountain communities along the East Coast -
                    from the Green Mountains of Vermont to the Blue Ridge of North Carolina.
                    Every spot on this map represents our commitment to quality, community, and the great outdoors.
                </p>
            </div>
        </aside>

        <div id="map" role="application" aria-label="Interactive map of Sunshine Trail locations from Vermont to North Carolina">
            <div class="zoom-hint" id="zoom-hint">
                <span>Zoom in for more detail</span>
            </div>
        </div>
    </main>

    <footer class="bottom-brand">
        <a href="https://www.lawsonsfinest.com" target="_blank" rel="noopener noreferrer" class="bottom-brand-link">
            <img src="assets/images/lawsons-logo.svg" alt="Lawson's Finest Liquids" class="bottom-brand-logo">
        </a>
        <p class="bottom-brand-text">
            Visit <a href="https://www.lawsonsfinest.com" target="_blank" rel="noopener noreferrer">lawsonsfinest.com</a>
        </p>
    </footer>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js" crossorigin="anonymous"></script>
    <script>
        // Initialize the map with smooth scrolling and animations
        const map = L.map('map', {
            center: [39.5, -77.5],
            zoom: 6,
            zoomControl: true,
            scrollWheelZoom: true,
            zoomSnap: 0.1,              // Allow finer zoom levels
            zoomDelta: 0.25,            // Smaller zoom steps for smoother feel
            wheelPxPerZoomLevel: 100,   // More wheel movement per zoom level
            wheelDebounceTime: 40,      // Responsive wheel zoom
            zoomAnimation: true,
            fadeAnimation: true,
            markerZoomAnimation: true,
            inertia: true,
            inertiaDeceleration: 2000,  // Smooth deceleration
            inertiaMaxSpeed: 2000,
            easeLinearity: 0.2,         // Smoother easing
            tap: true,
            touchZoom: true,
            doubleClickZoom: true,
            boxZoom: true
        });

        // Add a styled tile layer with smooth transitions
        L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 19,
            updateWhenZooming: false,
            updateWhenIdle: true,
            keepBuffer: 4
        }).addTo(map);

        // Define marker icons - using custom images with correct dimensions
        const markerIcons = {
            retailer: L.icon({
                iconUrl: 'assets/images/marker-retailer.svg',
                iconSize: [36, 36],
                iconAnchor: [18, 36],
                popupAnchor: [0, -36],
                className: 'marker-icon'
            }),
            brewery: L.icon({
                iconUrl: 'assets/images/marker-brewery.svg',
                iconSize: [40, 40],
                iconAnchor: [20, 40],
                popupAnchor: [0, -40],
                className: 'marker-icon'
            }),
            tastingroom: L.icon({
                iconUrl: 'assets/images/marker-tastingroom.svg',
                iconSize: [36, 36],
                iconAnchor: [18, 36],
                popupAnchor: [0, -36],
                className: 'marker-icon'
            }),
            bar: L.icon({
                iconUrl: 'assets/images/marker-bar.svg',
                iconSize: [36, 36],
                iconAnchor: [18, 36],
                popupAnchor: [0, -36],
                className: 'marker-icon'
            }),
            trail: L.icon({
                iconUrl: 'assets/images/marker-trail.svg',
                iconSize: [40, 40],
                iconAnchor: [20, 40],
                popupAnchor: [0, -40],
                className: 'marker-icon'
            }),
            river: L.icon({
                iconUrl: 'assets/images/marker-river.svg',
                iconSize: [40, 40],
                iconAnchor: [20, 40],
                popupAnchor: [0, -40],
                className: 'marker-icon'
            }),
            community: L.icon({
                iconUrl: 'assets/images/marker-community.svg',
                iconSize: [40, 40],
                iconAnchor: [20, 40],
                popupAnchor: [0, -40],
                className: 'marker-icon'
            }),
            charger: L.icon({
                iconUrl: 'assets/images/marker-charger.svg',
                iconSize: [36, 36],
                iconAnchor: [18, 36],
                popupAnchor: [0, -36],
                className: 'marker-icon'
            })
        };

        // Get marker icon for category
        function createMarkerIcon(category) {
            return markerIcons[category];
        }

        // Sunshine Trail Data
        const sunshineSpots = [
            // === BREWERIES ===
            {
                name: "Lawson's Finest Liquids Brewery",
                category: "brewery",
                lat: 44.1852,
                lng: -72.8288,
                location: "155 Carroll Road, Waitsfield, VT",
                description: "The destination brewery and spiritual home of Lawson's Finest Liquids. Features a 34-barrel brewhouse, taproom, and Vermont's largest solar canopy.",
                url: "https://www.lawsonsfinest.com/taproom/"
            },
            {
                name: "Lawson's Original Nanobrewery",
                category: "brewery",
                lat: 44.1189,
                lng: -72.8556,
                location: "Warren, VT",
                description: "The 'Crooked Cabin' where Sean Lawson founded the brand in 2008. This 1-barrel nanobrewery is used for R&D and small-batch experimentation. Not open to public.",
                url: "https://www.lawsonsfinest.com/about-us/history/"
            },
            {
                name: "Two Roads Brewing Company",
                category: "brewery",
                lat: 41.1884,
                lng: -73.1318,
                location: "1700 Stratford Ave, Stratford, CT",
                description: "Strategic production partner where Sip of Sunshine is brewed for regional distribution. Alternating proprietorship allows Lawson's direct quality control.",
                url: "https://tworoadsbrewing.com/"
            },

            // === TASTING ROOMS ===
            {
                name: "Lawson's Finest Taproom",
                category: "tastingroom",
                lat: 44.1854,
                lng: -72.8285,
                location: "155 Carroll Road, Waitsfield, VT",
                description: "The primary tasting room featuring taproom-exclusive beers, seasonal releases, and the full Lawson's experience. Open daily with food menu and Bark Park for dogs.",
                url: "https://www.lawsonsfinest.com/taproom/"
            },

            // === BARS & RESTAURANTS ===
            // North Carolina
            {
                name: "The Whale",
                category: "bar",
                lat: 35.5847,
                lng: -82.5673,
                location: "507 Haywood Rd, West Asheville, NC",
                description: "Tastemaker craft beer bar chosen as a primary launch partner for Lawson's NC distribution in 2024. Known for curated draft selection.",
                url: null
            },
            // Pennsylvania
            {
                name: "City Tap House",
                category: "bar",
                lat: 39.9543,
                lng: -75.1715,
                location: "2 Logan Square, Philadelphia, PA",
                description: "Upscale gastropub explicitly featuring Sip of Sunshine on draft. Part of the Center City SIPS happy hour circuit.",
                url: "https://citytap.com/"
            },
            {
                name: "Uptown Beer Garden",
                category: "bar",
                lat: 39.9536,
                lng: -75.1656,
                location: "1500 JFK Blvd, Philadelphia, PA",
                description: "Massive outdoor beer garden highlighted as a 'SIPS of Sunshine' destination during Philadelphia's summer happy hour program.",
                url: null
            },
            // New York
            {
                name: "Greenwood Park",
                category: "bar",
                lat: 40.6592,
                lng: -73.9897,
                location: "555 7th Ave, Brooklyn, NY",
                description: "Massive Brooklyn beer garden that hosted Lawson's Summer Solstice event, indicating strong brand activation capabilities.",
                url: "https://greenwoodparkbk.com/"
            },
            {
                name: "Stout NYC - Grand Central",
                category: "bar",
                lat: 40.7527,
                lng: -73.9772,
                location: "133 W 33rd St, New York, NY",
                description: "High-visibility commuter hub capturing Metro-North traffic. Key draft account for the NYC market.",
                url: "https://stoutnyc.com/"
            },
            // Connecticut
            {
                name: "Eli Cannon's Tap Room",
                category: "bar",
                lat: 41.5623,
                lng: -72.6506,
                location: "695 Main St, Middletown, CT",
                description: "Legendary beer bar that hosted Summer Solstice with rare kegs of Double Sunshine. A craft beer institution since 1994.",
                url: "https://elicannons.com/"
            },
            // Rhode Island
            {
                name: "The Red Door",
                category: "bar",
                lat: 41.8236,
                lng: -71.4222,
                location: "49 Peck St, Providence, RI",
                description: "Upscale cocktail bar featuring Lawson's on a curated beer list. Emphasizes culinary and cocktail pairing.",
                url: null
            },
            // Massachusetts
            {
                name: "Five Horses Tavern",
                category: "bar",
                lat: 42.3388,
                lng: -71.0885,
                location: "535 Columbus Ave, Boston, MA",
                description: "Craft-centric gastropub with 40 rotating drafts. A staple account for consistent Lawson's volume in Boston.",
                url: "https://www.fivehorsestavern.com/"
            },
            // Maine
            {
                name: "Luna Rooftop",
                category: "bar",
                lat: 43.6568,
                lng: -70.2495,
                location: "Canopy Portland Waterfront, Portland, ME",
                description: "High-end rooftop bar positioning Lawson's as a premium lifestyle beverage in Portland's competitive craft scene.",
                url: "https://lunarooftopbarmaine.com/"
            },
            {
                name: "Hunt & Alpine Club",
                category: "bar",
                lat: 43.6591,
                lng: -70.2554,
                location: "75 Market St, Portland, ME",
                description: "James Beard semi-finalist cocktail bar. Lawson's presence here validates quality among mixology connoisseurs.",
                url: "https://www.huntandalpineclub.com/"
            },
            // Vermont
            {
                name: "Worthy Burger",
                category: "bar",
                lat: 43.7864,
                lng: -72.5209,
                location: "56 Rainbow St, South Royalton, VT",
                description: "Craft beer destination that hosted the Summer Solstice event, indicating priority status for Lawson's draft takeovers.",
                url: "https://worthyvermont.com/"
            },
            // Maine - Additional
            {
                name: "The Thirsty Pig",
                category: "bar",
                lat: 43.6576,
                lng: -70.2521,
                location: "37 Exchange St, Portland, ME",
                description: "Staple of Portland's Old Port district specializing in house-made sausages and craft beer.",
                image: "https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=400&h=200&fit=crop",
                url: "https://www.thethirstypig.com/"
            },
            {
                name: "Bonfire Country Bar",
                category: "bar",
                lat: 43.6553,
                lng: -70.2577,
                location: "24 Preble St, Portland, ME",
                description: "High-volume venue with Bacon Happier Hour featuring Lawson's in their 20-tap lineup.",
                image: "https://images.unsplash.com/photo-1575037614876-c38a4c44d4d8?w=400&h=200&fit=crop",
                url: "https://www.bonfirecountrybar.com/"
            },
            // Rhode Island - Additional
            {
                name: "Moonshine Alley",
                category: "bar",
                lat: 41.8230,
                lng: -71.4150,
                location: "293 Atwells Ave, Providence, RI",
                description: "Nashville-themed venue on Federal Hill serving Lawson's alongside Southern comfort food.",
                image: "https://images.unsplash.com/photo-1572116469696-31de0f17cc34?w=400&h=200&fit=crop",
                url: "https://www.moonshinealley.com/"
            },
            {
                name: "The Scurvy Dog",
                category: "bar",
                lat: 41.8188,
                lng: -71.4380,
                location: "1718 Westminster St, Providence, RI",
                description: "Self-described punk rock pub. Explicitly lists Sip of Sunshine cans. Validates street credibility.",
                image: "https://images.unsplash.com/photo-1543007630-9710e4a00a20?w=400&h=200&fit=crop",
                url: null
            },
            {
                name: "McBride's Irish Pub",
                category: "bar",
                lat: 41.8306,
                lng: -71.3978,
                location: "161 Wayland Ave, Providence, RI",
                description: "Historic venue and community hub for Wayland Square neighborhood. Lawson's as a premium option.",
                image: "https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=400&h=200&fit=crop",
                url: null
            },
            // Massachusetts - Additional
            {
                name: "Bostonia Public House",
                category: "bar",
                lat: 42.3551,
                lng: -71.0549,
                location: "131 State St, Boston, MA",
                description: "Financial district venue serving 16oz Sip of Sunshine, targeting corporate after-work crowd.",
                image: "https://images.unsplash.com/photo-1525610553991-2bede1a236e2?w=400&h=200&fit=crop",
                url: "https://bostoniapublichouse.com/"
            },
            // New York - Additional
            {
                name: "Stout NYC - Penn Station",
                category: "bar",
                lat: 40.7505,
                lng: -73.9934,
                location: "Penn Station Area, New York, NY",
                description: "Major transit hub location (Amtrak/LIRR/NJT) with high-volume draft account.",
                image: "https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=400&h=200&fit=crop",
                url: "https://stoutnyc.com/"
            },
            // New Hampshire
            {
                name: "Dwyer's Pub",
                category: "bar",
                lat: 43.0718,
                lng: -70.7626,
                location: "195 Fleet St, Portsmouth, NH",
                description: "Hosted Summer Solstice event with Double Sunshine on draft. Key NH market account.",
                image: "https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=400&h=200&fit=crop",
                url: "https://www.dwyerspub.com/"
            },
            // Pennsylvania - Additional SIPS Venues
            {
                name: "McGillin's Olde Ale House",
                category: "bar",
                lat: 39.9512,
                lng: -75.1610,
                location: "1310 Drury St, Philadelphia, PA",
                description: "Philadelphia's oldest continuously operating tavern (est. 1860). Center City SIPS participant.",
                image: "https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=400&h=200&fit=crop",
                url: "https://mcgillins.com/"
            },
            {
                name: "Independence Beer Garden",
                category: "bar",
                lat: 39.9494,
                lng: -75.1502,
                location: "100 S Independence Mall W, Philadelphia, PA",
                description: "Large outdoor beer garden near Independence Hall. Major SIPS venue with hundreds of seats.",
                image: "https://images.unsplash.com/photo-1575037614876-c38a4c44d4d8?w=400&h=200&fit=crop",
                url: "https://phlbeergarden.com/"
            },
            {
                name: "Barcade",
                category: "bar",
                lat: 39.9497,
                lng: -75.1595,
                location: "1326 Chestnut St, Philadelphia, PA",
                description: "Arcade bar combining classic games with craft beer. SIPS participant featuring Lawson's drafts.",
                image: "https://images.unsplash.com/photo-1511882150382-421056c89033?w=400&h=200&fit=crop",
                url: "https://barcadephiladelphia.com/"
            },
            {
                name: "Br Craft & Wurst",
                category: "bar",
                lat: 39.9502,
                lng: -75.1603,
                location: "1318 Chestnut St, Philadelphia, PA",
                description: "German-style beer hall and SIPS venue. Perfect pairing for Lawson's IPAs.",
                image: "https://images.unsplash.com/photo-1558642452-9d2a7deb7f62?w=400&h=200&fit=crop",
                url: "https://brucraftwurst.com/"
            },
            {
                name: "Fado Irish Pub",
                category: "bar",
                lat: 39.9480,
                lng: -75.1651,
                location: "1500 Locust St, Philadelphia, PA",
                description: "Authentic Irish pub on Rittenhouse Row. SIPS participant with extensive craft selection.",
                image: "https://images.unsplash.com/photo-1555658636-6e4a36218be7?w=400&h=200&fit=crop",
                url: "https://fadoirishpub.com/philadelphia/"
            },

            // === RETAILERS ===
            // Vermont
            {
                name: "Lawson's Finest Liquids Taproom",
                category: "retailer",
                lat: 44.1852,
                lng: -72.8288,
                location: "Waitsfield, VT",
                description: "The home of Sip of Sunshine. Visit our taproom for the freshest pours and exclusive releases.",
                url: "https://www.lawsonsfinest.com"
            },
            {
                name: "Mad River Taste Place",
                category: "retailer",
                lat: 44.1870,
                lng: -72.8256,
                location: "Waitsfield, VT",
                description: "The Valley's go-to destination for Vermont craft beer, local cider, wine, and hyper-local spirits.",
                url: "https://madrivervalley.com"
            },
            {
                name: "Mehuron's Supermarket",
                category: "retailer",
                lat: 44.1858,
                lng: -72.8271,
                location: "Waitsfield, VT",
                description: "Local grocery with an excellent Vermont craft beer selection including Lawson's Finest.",
                url: null
            },
            {
                name: "JD's Quick Stop",
                category: "retailer",
                lat: 43.9289,
                lng: -72.8411,
                location: "Hancock, VT",
                description: "Famous beer cave with a curated selection of Vermont's finest including Lawson's, Heady Topper, and more.",
                url: null
            },
            // Massachusetts
            {
                name: "Craft Beer Cellar - Belmont",
                category: "retailer",
                lat: 42.3962,
                lng: -71.1784,
                location: "Belmont, MA",
                description: "Premier craft beer retailer featuring rotating selections from Lawson's Finest Liquids.",
                url: "https://craftbeercellar.com"
            },
            {
                name: "Blanchard's Liquors",
                category: "retailer",
                lat: 42.3151,
                lng: -71.0589,
                location: "Boston, MA",
                description: "Boston's destination for craft beer with regular Lawson's Finest availability.",
                url: null
            },
            // Connecticut
            {
                name: "Two Roads Brewing Company",
                category: "retailer",
                lat: 41.2226,
                lng: -73.1353,
                location: "Stratford, CT",
                description: "Our brewing partner - Sip of Sunshine is brewed here. Visit the taproom for fresh pours.",
                url: "https://tworoadsbrewing.com"
            },
            // New York
            {
                name: "Whole Foods Market - Union Square",
                category: "retailer",
                lat: 40.7359,
                lng: -73.9911,
                location: "New York, NY",
                description: "Quality craft beer selection in Manhattan including Lawson's Finest offerings.",
                url: null
            },
            // Pennsylvania
            {
                name: "Monk's Cafe",
                category: "retailer",
                lat: 39.9478,
                lng: -75.1639,
                location: "Philadelphia, PA",
                description: "Legendary Philadelphia beer bar known for exceptional craft selections.",
                url: "https://monkscafe.com"
            },
            {
                name: "Tired Hands Brewing Company",
                category: "retailer",
                lat: 40.0054,
                lng: -75.3099,
                location: "Ardmore, PA",
                description: "Award-winning brewery and fermentaria with rotating guest taps.",
                url: "https://tiredhands.com"
            },
            // Virginia
            {
                name: "Total Wine & More - Richmond",
                category: "retailer",
                lat: 37.5955,
                lng: -77.5201,
                location: "Richmond, VA",
                description: "Extensive craft beer selection with regular Lawson's Finest availability.",
                url: "https://totalwine.com"
            },
            {
                name: "The Veil Brewing Co.",
                category: "retailer",
                lat: 37.5541,
                lng: -77.4599,
                location: "Richmond, VA",
                description: "Richmond's favorite brewery - check for Lawson's guest taps and events.",
                url: "https://theveilbrewing.com"
            },
            // North Carolina
            {
                name: "Weinhaus",
                category: "retailer",
                lat: 35.5951,
                lng: -82.5515,
                location: "Asheville, NC",
                description: "Downtown Asheville's oldest and largest bottle shop with 12 local NC beers on tap.",
                url: "https://weinhaus.com"
            },
            {
                name: "Local 604 Bottle Shop - West",
                category: "retailer",
                lat: 35.5847,
                lng: -82.5760,
                location: "Asheville, NC",
                description: "West Asheville's best little bottle shop with over 20 local breweries represented.",
                url: "https://local604avl.com"
            },
            {
                name: "The Whale - A Craft Beer Collective",
                category: "retailer",
                lat: 35.5943,
                lng: -82.5540,
                location: "Asheville, NC",
                description: "Exceptional craft beer selection - one of the best bottle shops on the East Coast.",
                url: null
            },
            {
                name: "Appalachian Vintner",
                category: "retailer",
                lat: 35.6012,
                lng: -82.5568,
                location: "Asheville, NC",
                description: "Great selection and one-stop shopping for beer and wine in Asheville.",
                url: null
            },
            // Additional Vermont Retailers
            {
                name: "Cold Hollow Cider Mill",
                category: "retailer",
                lat: 44.3856,
                lng: -72.7469,
                location: "Waterbury, VT",
                description: "Iconic Vermont destination with craft beer, fresh cider donuts, and local products. A Route 100 must-stop.",
                url: "https://coldhollow.com"
            },
            {
                name: "Stowe Public House",
                category: "retailer",
                lat: 44.4654,
                lng: -72.6874,
                location: "Stowe, VT",
                description: "Classic Vermont tavern with an excellent rotating craft beer selection including Lawson's Finest.",
                url: null
            },
            // Additional New Hampshire
            {
                name: "Bert's Better Beers",
                category: "retailer",
                lat: 42.9956,
                lng: -71.4548,
                location: "Hooksett, NH",
                description: "New Hampshire's premier craft beer destination with 1,200+ craft beers. Consistently stocks Lawson's.",
                url: "https://bertsbetterbeers.com"
            },
            // Additional Massachusetts
            {
                name: "Yankee Spirits",
                category: "retailer",
                lat: 42.0834,
                lng: -71.0184,
                location: "Attleboro, MA",
                description: "Award-winning liquor store chain with extensive craft beer selection including Lawson's Finest.",
                url: "https://yankeespirits.com"
            },
            {
                name: "Stop & Shop - Boston",
                category: "retailer",
                lat: 42.3467,
                lng: -71.0972,
                location: "Boston, MA",
                description: "Major grocery chain carrying Lawson's Sip of Sunshine in 4-packs. Cold stored for freshness.",
                url: "https://stopandshop.com"
            },
            {
                name: "Gordon's Fine Wines & Liquors",
                category: "retailer",
                lat: 42.4501,
                lng: -71.2326,
                location: "Waltham, MA",
                description: "Family-owned since 1936. Excellent craft beer cave with rotating Lawson's selections.",
                url: "https://gordonswine.com"
            },
            // Additional Connecticut
            {
                name: "Craft Beer Shop - New Haven",
                category: "retailer",
                lat: 41.3083,
                lng: -72.9279,
                location: "New Haven, CT",
                description: "Dedicated craft beer bottle shop in the heart of New Haven. Fresh Lawson's regularly in stock.",
                url: null
            },
            // Additional New York
            {
                name: "Half Time Beverage",
                category: "retailer",
                lat: 41.0255,
                lng: -73.7618,
                location: "Mamaroneck, NY",
                description: "Legendary NY craft beer destination with 2,000+ beers. A bucket-list stop for beer lovers.",
                url: "https://halftimebeverage.com"
            },
            {
                name: "Whole Foods Market - Brooklyn",
                category: "retailer",
                lat: 40.6892,
                lng: -73.9785,
                location: "Brooklyn, NY",
                description: "Fort Greene location with curated craft beer selection including Lawson's Sip of Sunshine.",
                url: "https://wholefoodsmarket.com"
            },
            {
                name: "Wegmans - Rochester",
                category: "retailer",
                lat: 43.1166,
                lng: -77.6088,
                location: "Rochester, NY",
                description: "The original Wegmans location with an exceptional beer department. Lawson's regularly stocked.",
                url: "https://wegmans.com"
            },
            // Additional New Jersey
            {
                name: "Wegmans - Princeton",
                category: "retailer",
                lat: 40.3176,
                lng: -74.6532,
                location: "Princeton, NJ",
                description: "Premium grocery with outstanding craft beer selection and cold storage. Fresh Lawson's available.",
                url: "https://wegmans.com"
            },
            {
                name: "Buy Rite Liquors - Jersey City",
                category: "retailer",
                lat: 40.7282,
                lng: -74.0776,
                location: "Jersey City, NJ",
                description: "Well-stocked craft beer selection with regular Lawson's Finest availability.",
                url: null
            },
            // Additional Pennsylvania
            {
                name: "ACME Markets - Wayne",
                category: "retailer",
                lat: 40.0439,
                lng: -75.3879,
                location: "Wayne, PA",
                description: "Full-service grocery with craft beer section featuring Lawson's Sip of Sunshine.",
                url: "https://acmemarkets.com"
            },
            {
                name: "Wegmans - King of Prussia",
                category: "retailer",
                lat: 40.0878,
                lng: -75.3889,
                location: "King of Prussia, PA",
                description: "Expansive beer department with dedicated craft section. Lawson's kept cold for optimal freshness.",
                url: "https://wegmans.com"
            },
            // Additional Virginia
            {
                name: "Corks & Kegs - Leesburg",
                category: "retailer",
                lat: 39.1157,
                lng: -77.5636,
                location: "Leesburg, VA",
                description: "Northern Virginia craft beer destination with 500+ craft selections including Lawson's.",
                url: null
            },
            {
                name: "Whole Foods Market - Fairfax",
                category: "retailer",
                lat: 38.8462,
                lng: -77.3064,
                location: "Fairfax, VA",
                description: "Fresh Lawson's on draft and in cans. Part of their curated Virginia craft beer program.",
                url: "https://wholefoodsmarket.com"
            },
            {
                name: "Beer Run - Charlottesville",
                category: "retailer",
                lat: 38.0293,
                lng: -78.4767,
                location: "Charlottesville, VA",
                description: "Craft beer bar and bottle shop near UVA. Fresh Lawson's in cans with rotating draft selections.",
                url: "https://beerrun.com"
            },
            {
                name: "Staunton Grocery",
                category: "retailer",
                lat: 38.1496,
                lng: -79.0717,
                location: "Staunton, VA",
                description: "Boutique grocery in the Shenandoah Valley with craft beer selection. Near Skyline Drive.",
                url: null
            },
            // Additional North Carolina
            {
                name: "Tasty Beverage Co.",
                category: "retailer",
                lat: 35.7721,
                lng: -78.6386,
                location: "Raleigh, NC",
                description: "Raleigh's premier craft beer bottle shop with 1,000+ selections. Fresh Lawson's available.",
                url: "https://tastybeverageco.com"
            },
            {
                name: "Good Bottle Co.",
                category: "retailer",
                lat: 35.2106,
                lng: -80.8308,
                location: "Charlotte, NC",
                description: "South End Charlotte's neighborhood bottle shop with curated craft selections including Lawson's.",
                url: "https://goodbottleco.com"
            },
            {
                name: "Craft - Asheville",
                category: "retailer",
                lat: 35.5923,
                lng: -82.5574,
                location: "Asheville, NC",
                description: "Grove Arcade location with rotating craft beer and fresh Lawson's from Artisan Beverage Group.",
                url: null
            },
            // Rhode Island
            {
                name: "Nikki's Liquors",
                category: "retailer",
                lat: 41.8240,
                lng: -71.4128,
                location: "Providence, RI",
                description: "Providence's go-to craft beer destination. Extensive selection with regular Lawson's stock.",
                url: "https://nikkisliquors.com"
            },
            // Maine
            {
                name: "RSVP Discount Beverage",
                category: "retailer",
                lat: 43.6591,
                lng: -70.2568,
                location: "Portland, ME",
                description: "Portland's largest beer selection with 1,500+ craft beers. Fresh Lawson's in the cooler.",
                url: "https://rsvpdiscountbeverage.com"
            },

            // === TRAILS ===
            // Vermont
            {
                name: "Camel's Hump via Long Trail",
                category: "trail",
                lat: 44.3198,
                lng: -72.8862,
                location: "Duxbury, VT",
                description: "Vermont's most iconic mountain with 360-degree views. 6.8 miles round trip. One of only four peaks in Vermont with alpine tundra.",
                url: "https://www.alltrails.com/trail/us/vermont/camels-hump-via-long-trail-and-burrows-trail"
            },
            {
                name: "Stratton Mountain",
                category: "trail",
                lat: 43.0822,
                lng: -72.9089,
                location: "Stratton, VT",
                description: "Where Benton MacKaye conceived the Appalachian Trail. Features peaceful streams, meadows, and pristine Stratton Pond.",
                url: "https://www.alltrails.com/trail/us/vermont/stratton-mountain-and-stratton-pond-via-long-trail"
            },
            {
                name: "Mount Mansfield - Long Trail",
                category: "trail",
                lat: 44.5437,
                lng: -72.8143,
                location: "Stowe, VT",
                description: "Vermont's highest peak at 4,393 ft. Stunning ridge walk along 'The Chin' with alpine scenery.",
                url: "https://www.alltrails.com/trail/us/vermont/mount-mansfield-via-sunset-ridge-and-long-trail"
            },
            // New Hampshire
            {
                name: "Franconia Ridge Loop",
                category: "trail",
                lat: 44.1604,
                lng: -71.6447,
                location: "Franconia, NH",
                description: "One of the premier day hikes in the entire country. Above-treeline ridge walk with 360-degree views. 8.9 miles.",
                url: "https://www.alltrails.com/trail/us/new-hampshire/franconia-ridge-trail-loop"
            },
            {
                name: "Mount Washington via Tuckerman Ravine",
                category: "trail",
                lat: 44.2706,
                lng: -71.3033,
                location: "Pinkham Notch, NH",
                description: "The Northeast's highest peak at 6,288 ft. Historic and challenging. Once held the world wind speed record.",
                url: "https://www.alltrails.com/trail/us/new-hampshire/mount-washington-via-tuckerman-ravine-trail"
            },
            // Massachusetts
            {
                name: "Mount Greylock - Appalachian Trail",
                category: "trail",
                lat: 42.6376,
                lng: -73.1662,
                location: "Adams, MA",
                description: "Massachusetts' highest point at 3,491 ft. The AT passes over the summit with panoramic views of five states.",
                url: "https://www.alltrails.com/trail/us/massachusetts/mount-greylock-via-hopper-trail"
            },
            {
                name: "Taconic Highlands - Mount Everett",
                category: "trail",
                lat: 42.0977,
                lng: -73.4374,
                location: "Mount Washington, MA",
                description: "A 17-mile AT section with old-growth forest, waterfalls, and open summits without crossing a single road.",
                url: "https://www.alltrails.com/trail/us/massachusetts/mount-everett-via-appalachian-trail"
            },
            // Pennsylvania
            {
                name: "Hawk Mountain Sanctuary",
                category: "trail",
                lat: 40.6359,
                lng: -75.9871,
                location: "Kempton, PA",
                description: "World-renowned raptor migration site. Over 20,000 hawks fly over each fall. Multiple scenic overlooks.",
                url: "https://www.hawkmountain.org/visit/plan-your-visit"
            },
            {
                name: "The Pinnacle",
                category: "trail",
                lat: 40.5805,
                lng: -75.9143,
                location: "Hamburg, PA",
                description: "Considered by many to be the AT's best view in Pennsylvania. 9-mile loop with stunning rock formations.",
                url: "https://www.alltrails.com/trail/us/pennsylvania/pinnacle-and-pulpit-rock-loop-via-appalachian-trail"
            },
            // Virginia
            {
                name: "McAfee Knob",
                category: "trail",
                lat: 37.2390,
                lng: -80.0328,
                location: "Salem, VA",
                description: "The most photographed spot on the entire Appalachian Trail. Iconic rock outcrop with widescreen mountain views. 8.8 miles.",
                url: "https://www.alltrails.com/trail/us/virginia/mcafee-knob-via-appalachian-trail"
            },
            {
                name: "Three Ridges Wilderness",
                category: "trail",
                lat: 37.9189,
                lng: -79.0168,
                location: "Waynesboro, VA",
                description: "Scenic views, 40-foot waterfalls, and swimming holes. A challenging but rewarding AT section.",
                url: "https://www.alltrails.com/trail/us/virginia/three-ridges-via-appalachian-trail"
            },
            {
                name: "Old Rag Mountain",
                category: "trail",
                lat: 38.5533,
                lng: -78.3161,
                location: "Shenandoah NP, VA",
                description: "Virginia's most popular hike. Iconic rock scramble with 360-degree views from the summit.",
                url: "https://www.alltrails.com/trail/us/virginia/old-rag-mountain-loop-trail"
            },
            // North Carolina
            {
                name: "Max Patch",
                category: "trail",
                lat: 35.7972,
                lng: -82.9569,
                location: "Hot Springs, NC",
                description: "A rolling, grassy mountaintop bald with endless wildflowers and stunning 360-degree panoramas. One of our favorites on the AT.",
                url: "https://www.alltrails.com/trail/us/north-carolina/max-patch-loop-trail"
            },
            {
                name: "Roan Highlands - Carvers Gap",
                category: "trail",
                lat: 36.1064,
                lng: -82.1098,
                location: "Roan Mountain, NC/TN",
                description: "Rolling balds with fields of wildflowers. Hike to Round Bald, Jane Bald, and Grassy Ridge for incredible views.",
                url: "https://www.alltrails.com/trail/us/north-carolina/grassy-ridge-bald-via-appalachian-trail"
            },
            {
                name: "Craggy Gardens",
                category: "trail",
                lat: 35.7019,
                lng: -82.3790,
                location: "Blue Ridge Parkway, NC",
                description: "Famous for rhododendron blooms. Easy to moderate trails with panoramic Blue Ridge views.",
                url: "https://www.alltrails.com/trail/us/north-carolina/craggy-gardens-trail"
            },
            {
                name: "Looking Glass Rock",
                category: "trail",
                lat: 35.2957,
                lng: -82.7877,
                location: "Pisgah NF, NC",
                description: "Iconic granite dome near Brevard. Challenging 6.5-mile hike rewarded with spectacular views.",
                url: "https://www.alltrails.com/trail/us/north-carolina/looking-glass-rock-trail"
            },

            // === RIVER PUT-INS ===
            // Vermont
            {
                name: "Mad River - Waitsfield Access",
                category: "river",
                lat: 44.1892,
                lng: -72.8301,
                location: "Waitsfield, VT",
                description: "Local favorite for kayaking and swimming. Class I-II rapids through the heart of the Mad River Valley.",
                url: "https://www.clearwatervt.com/trips"
            },
            {
                name: "White River - Chelsea Park",
                category: "river",
                lat: 43.7832,
                lng: -72.4689,
                location: "Sharon, VT",
                description: "Vermont's longest undammed river. Popular put-in for scenic day paddles with few portages required.",
                url: "https://www.vermontpaddlers.club/white-river"
            },
            {
                name: "Connecticut River - Wilgus State Park",
                category: "river",
                lat: 43.4397,
                lng: -72.4128,
                location: "Ascutney, VT",
                description: "Canoe and kayak rentals available. Part of the 400-mile Connecticut River Paddlers' Trail.",
                url: "https://www.connecticutriverpaddlerstrail.org"
            },
            // New Hampshire
            {
                name: "Connecticut River - Hanover",
                category: "river",
                lat: 43.7022,
                lng: -72.2896,
                location: "Hanover, NH",
                description: "Easy access point on New England's longest river. Beautiful paddling through scenic Upper Valley.",
                url: "https://www.ledyardcanoeclub.org"
            },
            // Virginia
            {
                name: "James River - Buchanan",
                category: "river",
                lat: 37.5275,
                lng: -79.6787,
                location: "Buchanan, VA",
                description: "Upper James River Water Trail access. 64 miles of paddling through the Allegheny and Blue Ridge Mountains.",
                url: "https://www.upperjamesriverwatertrail.com"
            },
            {
                name: "Roanoke River Blueway - Wasena Park",
                category: "river",
                lat: 37.2620,
                lng: -79.9571,
                location: "Roanoke, VA",
                description: "Voted one of the best urban kayaking spots in the US. Easy float through Virginia's Blue Ridge.",
                url: "https://www.roanokecountyparks.com/283/Roanoke-River-Blueway"
            },
            {
                name: "New River - McCoy Access",
                category: "river",
                lat: 37.2419,
                lng: -80.6009,
                location: "Giles County, VA",
                description: "Start of the 37-mile New River Water Trail. Class I to III rapids through stunning mountain scenery.",
                url: "https://www.newriverwatertrail.com"
            },
            // North Carolina
            {
                name: "French Broad River - Asheville",
                category: "river",
                lat: 35.5707,
                lng: -82.5779,
                location: "Asheville, NC",
                description: "The heart of Asheville's outdoor scene. Multiple access points for tubing, kayaking, and paddleboarding.",
                url: "https://www.ashevilleoutdoorcenter.com"
            },
            {
                name: "French Broad River - Headwaters",
                category: "river",
                lat: 35.1430,
                lng: -82.8256,
                location: "Rosman, NC",
                description: "Headwaters Outfitters offers 3-7 hour self-guided trips. Pristine paddling southwest of Asheville.",
                url: "https://www.headwatersoutfitters.com"
            },
            {
                name: "Yadkin River - Surry County",
                category: "river",
                lat: 36.4117,
                lng: -80.6776,
                location: "Elkin, NC",
                description: "Over 100 miles of canoe/kayak waters. Surry County has more river access points than any other NC county.",
                url: "https://www.yadkinriverbluetrail.com"
            },

            // === COMMUNITY PARTNERS ===
            // Verified Lawson's Finest Liquids donation recipients from Cosmic Shift IPA,
            // Sunshine Fund, GivingTuesday, and Good Brews for a Cause programs.
            // Total: $3M+ donated to 400+ nonprofits since 2018.

            // VERMONT - Sunshine Fund & Home State Partners
            {
                name: "Vermont Foodbank",
                category: "community",
                state: "VT",
                lat: 44.2004,
                lng: -72.5073,
                location: "Barre, VT",
                description: "Vermont's largest hunger-relief organization, serving all 14 counties through a network of food shelves, meal sites, and community programs.",
                impact: "Thanks to support from Lawson's Cosmic Shift IPA, families like the Martins in rural Vermont can count on fresh produce and protein each week. 'After my husband's job loss, the food shelf kept our kids fed while we got back on our feet.'",
                image: "https://images.unsplash.com/photo-1593113598332-cd288d649433?w=400&h=200&fit=crop",
                url: "https://vtfoodbank.org",
                donateUrl: "https://vtfoodbank.org/give"
            },
            {
                name: "Upper Valley Haven",
                category: "community",
                state: "VT",
                lat: 43.6489,
                lng: -72.3212,
                location: "White River Junction, VT",
                description: "Providing food, shelter, education, and service coordination for families and individuals in need in the Upper Valley.",
                impact: "2024 Sunshine Fund recipient. The Haven helped Sarah, a single mom, transition from their shelter to stable housing. 'They didn't just give me a roof - they helped me build a future for my daughter.'",
                image: "https://images.unsplash.com/photo-1532629345422-7515f3d16bb6?w=400&h=200&fit=crop",
                url: "https://uppervalleyhaven.org",
                donateUrl: "https://uppervalleyhaven.org/donate"
            },
            {
                name: "Committee on Temporary Shelter (COTS)",
                category: "community",
                state: "VT",
                lat: 44.4759,
                lng: -73.2121,
                location: "Burlington, VT",
                description: "Working to end homelessness in Vermont through shelter, housing, and prevention services since 1982.",
                impact: "2024 Sunshine Fund recipient. Last winter, COTS helped 47 people find permanent housing. James, a veteran, says: 'COTS gave me more than shelter. They gave me back my dignity and a place to call home.'",
                image: "https://images.unsplash.com/photo-1469571486292-0ba58a3f068b?w=400&h=200&fit=crop",
                url: "https://cotsonline.org",
                donateUrl: "https://cotsonline.org/donate"
            },
            {
                name: "Green Mountain Farm-to-School",
                category: "community",
                state: "VT",
                lat: 44.0354,
                lng: -73.1795,
                location: "Newport, VT",
                description: "Connecting Vermont farms with schools to provide fresh, local food while teaching kids about nutrition and agriculture.",
                impact: "2024 Sunshine Fund recipient. Thanks to their programs, students in Orleans County now grow vegetables in school gardens. Teacher Amy shares: 'Kids who never touched a vegetable are now excited to eat what they planted.'",
                image: "https://images.unsplash.com/photo-1574943320219-553eb213f72d?w=400&h=200&fit=crop",
                url: "https://greenmountainfarmtoschool.org",
                donateUrl: "https://greenmountainfarmtoschool.org/donate"
            },
            {
                name: "Friends of the Winooski River",
                category: "community",
                state: "VT",
                lat: 44.4875,
                lng: -72.8899,
                location: "Montpelier, VT",
                description: "Protecting and restoring the Winooski River watershed through education, advocacy, and community engagement.",
                impact: "2024 Sunshine Fund recipient. Their river cleanup events have removed tons of debris while educating hundreds of volunteers. 'Every paddle on the Winooski is cleaner because of their work,' says kayaker Tom.",
                image: "https://images.unsplash.com/photo-1504893524553-b855bce32c67?w=400&h=200&fit=crop",
                url: "https://winooskiriver.org",
                donateUrl: "https://winooskiriver.org/donate"
            },
            {
                name: "Vermont Community Foundation",
                category: "community",
                state: "VT",
                lat: 44.2598,
                lng: -72.5754,
                location: "Middlebury, VT",
                description: "Partner for the inaugural SIPosium, supporting Vermont's flood recovery and building community resilience across the state.",
                impact: "After devastating floods, the Foundation mobilized rapid response grants. Homeowner Maria recalls: 'Within days of losing everything, we had help rebuilding. The Vermont spirit is real.'",
                image: "https://images.unsplash.com/photo-1559027615-cd4628902d4a?w=400&h=200&fit=crop",
                url: "https://vermontcf.org",
                donateUrl: "https://vermontcf.org/give"
            },
            {
                name: "Northeast Kingdom Community Action (NEKCA)",
                category: "community",
                state: "VT",
                lat: 44.5342,
                lng: -72.0196,
                location: "St. Johnsbury, VT",
                description: "Fighting poverty and building community in Vermont's Northeast Kingdom through comprehensive support services.",
                impact: "2024 Sunshine Fund recipient. NEKCA's heating assistance kept 200+ families warm last winter. 'Choosing between heat and food shouldn't happen in Vermont,' says director Lisa. 'We make sure it doesn't.'",
                image: "https://images.unsplash.com/photo-1488521787991-ed7bbaae773c?w=400&h=200&fit=crop",
                url: "https://nekcavt.org",
                donateUrl: "https://nekcavt.org/donate"
            },

            // NEW HAMPSHIRE - Cosmic Shift Beneficiary
            {
                name: "NH Food Alliance",
                category: "community",
                state: "NH",
                lat: 43.2081,
                lng: -71.5376,
                location: "Concord, NH",
                description: "Building a thriving, fair, and sustainable food system in New Hampshire by connecting farmers, food banks, and communities.",
                impact: "Cosmic Shift IPA beneficiary. The Alliance helped launch 12 new farm-to-food-bank partnerships. Farmer Jake says: 'Now my extra harvest feeds families instead of going to waste. It's farming with purpose.'",
                image: "https://images.unsplash.com/photo-1500937386664-56d1dfef3854?w=400&h=200&fit=crop",
                url: "https://nhfoodalliance.org",
                donateUrl: "https://nhfoodalliance.org/donate"
            },

            // MAINE - Cosmic Shift Beneficiary
            {
                name: "Cultivating Community",
                category: "community",
                state: "ME",
                lat: 43.6591,
                lng: -70.2568,
                location: "Portland, ME",
                description: "Growing food, farmers, and community through urban agriculture programs that serve immigrant and refugee communities.",
                impact: "Cosmic Shift IPA beneficiary. Their refugee farming program has helped 50+ families grow food from their homelands. Amara, from Somalia, shares: 'This garden connects me to home while feeding my children here.'",
                image: "https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=400&h=200&fit=crop",
                url: "https://cultivatingcommunity.org",
                donateUrl: "https://cultivatingcommunity.org/donate"
            },

            // MASSACHUSETTS - Cosmic Shift Beneficiary
            {
                name: "Spoonfuls (Lovin' Spoonfuls)",
                category: "community",
                state: "MA",
                lat: 42.3376,
                lng: -71.2087,
                location: "Newton, MA",
                description: "New England's largest food rescue operation, preventing 5M+ pounds of fresh food from going to waste each year.",
                impact: "Cosmic Shift IPA beneficiary. Their trucks rescue food daily from grocery stores and restaurants. Shelter director Mike says: 'Spoonfuls brings us restaurant-quality food. Our guests eat with dignity.'",
                image: "https://images.unsplash.com/photo-1593113616828-6f22bca04804?w=400&h=200&fit=crop",
                url: "https://spoonfuls.org",
                donateUrl: "https://spoonfuls.org/donate"
            },

            // RHODE ISLAND - Cosmic Shift Beneficiary
            {
                name: "Rhode Island Community Food Bank",
                category: "community",
                state: "RI",
                lat: 41.8176,
                lng: -71.3743,
                location: "Providence, RI",
                description: "Fighting hunger and improving lives by providing nutritious food to Rhode Islanders facing food insecurity.",
                impact: "Cosmic Shift IPA beneficiary. They distributed 18 million pounds of food last year. Grandmother Rosa shares: 'When times get hard, the food bank is there. My grandkids never go to bed hungry.'",
                image: "https://images.unsplash.com/photo-1488459716781-31db52582fe9?w=400&h=200&fit=crop",
                url: "https://rifoodbank.org",
                donateUrl: "https://rifoodbank.org/donate"
            },

            // CONNECTICUT - Cosmic Shift Beneficiary
            {
                name: "Alzheimer's Association - CT Chapter",
                category: "community",
                state: "CT",
                lat: 41.3651,
                lng: -72.9275,
                location: "New Haven, CT",
                description: "Leading the way in Alzheimer's care, support, and research - providing resources for patients and their families.",
                impact: "Cosmic Shift IPA beneficiary. Their support groups help caregivers cope. David, caring for his wife, says: 'I thought I was alone until I found this community. Now I have strength to keep going.'",
                image: "https://images.unsplash.com/photo-1576765608535-5f04d1e3f289?w=400&h=200&fit=crop",
                url: "https://alz.org/ct",
                donateUrl: "https://act.alz.org/donate"
            },

            // NEW YORK - Cosmic Shift Beneficiaries
            {
                name: "City Harvest",
                category: "community",
                state: "NY",
                lat: 40.7549,
                lng: -73.9840,
                location: "New York, NY",
                description: "NYC's largest food rescue organization, collecting excess food and delivering it to soup kitchens, food pantries, and community programs.",
                impact: "Cosmic Shift IPA beneficiary. Their trucks rescue 70 million pounds of food annually. Chef Marcus volunteers weekly: 'Food that would be thrown away instead feeds thousands. That's the magic of City Harvest.'",
                image: "https://images.unsplash.com/photo-1593113630400-ea4288922497?w=400&h=200&fit=crop",
                url: "https://cityharvest.org",
                donateUrl: "https://cityharvest.org/donate"
            },
            {
                name: "United Way of Greater Rochester",
                category: "community",
                state: "NY",
                lat: 43.1566,
                lng: -77.6088,
                location: "Rochester, NY",
                description: "Building stronger communities through education, financial stability, and health initiatives across the Finger Lakes region.",
                impact: "Cosmic Shift IPA beneficiary. Their early literacy programs have helped 3,000+ kids start school ready to learn. Teacher Patricia notes: 'The difference is clear on day one. These kids are confident and curious.'",
                image: "https://images.unsplash.com/photo-1509062522246-3755977927d7?w=400&h=200&fit=crop",
                url: "https://unitedwayrocflx.org",
                donateUrl: "https://unitedwayrocflx.org/donate"
            },

            // NEW JERSEY - Cosmic Shift Beneficiary
            {
                name: "Community FoodBank of New Jersey",
                category: "community",
                state: "NJ",
                lat: 40.7101,
                lng: -74.2097,
                location: "Hillside, NJ",
                description: "Fighting hunger and poverty in New Jersey, distributing food to over 800 partner agencies across the state.",
                impact: "Cosmic Shift IPA beneficiary. They provide 90 million meals annually. Single dad Robert shares: 'The food bank doesn't just fill our fridge - it lets me be a better father because I'm not worried about dinner.'",
                image: "https://images.unsplash.com/photo-1578357078586-491adf1aa5ba?w=400&h=200&fit=crop",
                url: "https://cfbnj.org",
                donateUrl: "https://cfbnj.org/donate"
            },

            // PENNSYLVANIA - Cosmic Shift Beneficiary
            {
                name: "Philabundance",
                category: "community",
                state: "PA",
                lat: 39.9153,
                lng: -75.1566,
                location: "Philadelphia, PA",
                description: "The Delaware Valley's largest hunger relief organization, serving 135,000+ people weekly through 350 agency partners.",
                impact: "Cosmic Shift IPA beneficiary. Their Community Kitchen also trains formerly incarcerated individuals for culinary careers. Graduate Jerome says: 'They gave me skills and a second chance. Now I'm a sous chef.'",
                image: "https://images.unsplash.com/photo-1541014741259-de529411b96a?w=400&h=200&fit=crop",
                url: "https://philabundance.org",
                donateUrl: "https://philabundance.org/donate"
            },

            // VIRGINIA - Conservation Partner
            {
                name: "James River Association",
                category: "community",
                state: "VA",
                lat: 37.5328,
                lng: -77.4360,
                location: "Richmond, VA",
                description: "Protecting and restoring Virginia's historic James River watershed from the mountains to the Chesapeake Bay since 1976.",
                impact: "Their paddle trips connect thousands with the river each year. Kayaker Christine says: 'I never knew Richmond had such an amazing river until JRA showed me. Now I'm a volunteer river cleaner.'",
                image: "https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=400&h=200&fit=crop",
                url: "https://thejamesriver.org",
                donateUrl: "https://thejamesriver.org/donate"
            },

            // NORTH CAROLINA - Conservation & Food Security Partners
            {
                name: "Blue Ridge Parkway Foundation",
                category: "community",
                state: "NC",
                lat: 35.5682,
                lng: -82.5315,
                location: "Asheville, NC",
                description: "Preserving America's Favorite Drive by supporting trails, overlooks, and visitor experiences along 469 miles of scenic mountain road.",
                impact: "Their trail crews maintain hundreds of miles of hiking paths. Volunteer Sam shares: 'Every weekend, we're out there clearing trails so families can enjoy these views for generations to come.'",
                image: "https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?w=400&h=200&fit=crop",
                url: "https://brpfoundation.org",
                donateUrl: "https://brpfoundation.org/donate"
            },
            {
                name: "French Broad Riverkeeper (MountainTrue)",
                category: "community",
                state: "NC",
                lat: 35.5946,
                lng: -82.5516,
                location: "Asheville, NC",
                description: "Protecting the waters of the French Broad River watershed through monitoring, advocacy, and community engagement.",
                impact: "Their water quality testing and advocacy has made the French Broad swimmable again. Paddler Jen says: 'I remember when no one would touch this water. Now my kids swim here every summer.'",
                image: "https://images.unsplash.com/photo-1468413253725-0d5181091126?w=400&h=200&fit=crop",
                url: "https://mountaintrue.org",
                donateUrl: "https://mountaintrue.org/donate"
            },
            {
                name: "MANNA FoodBank",
                category: "community",
                state: "NC",
                lat: 35.5781,
                lng: -82.5024,
                location: "Asheville, NC",
                description: "Ending hunger in Western North Carolina by distributing 50,000+ pounds of food daily through 200+ partner organizations.",
                impact: "After Hurricane Helene, MANNA mobilized emergency food distribution to hard-hit communities. Recipient Angela says: 'We lost everything, but MANNA made sure we didn't lose hope. Hot meals meant the world.'",
                image: "https://images.unsplash.com/photo-1594708767771-a7502f8a2e7c?w=400&h=200&fit=crop",
                url: "https://mannafoodbank.org",
                donateUrl: "https://mannafoodbank.org/donate"
            },

            // === DC FAST CHARGERS ===
            // North Carolina
            {
                name: "Tesla Supercharger - Asheville",
                category: "charger",
                lat: 35.5732,
                lng: -82.5413,
                location: "264 Thetford St, Asheville, NC",
                description: "Tesla Supercharger with 8 stalls, up to 250kW. Located near downtown Asheville.",
                url: "https://www.tesla.com/findus"
            },
            {
                name: "Tesla Supercharger - Mt Airy",
                category: "charger",
                lat: 36.5082,
                lng: -80.6193,
                location: "2905 Rockford St, Mt Airy, NC",
                description: "Tesla Supercharger with 8 stalls, up to 250kW. Great stop on Blue Ridge Parkway northern section.",
                url: "https://www.tesla.com/findus"
            },
            {
                name: "Electrify America - Boone",
                category: "charger",
                lat: 36.2038,
                lng: -81.6580,
                location: "1180 Blowing Rock Rd, Boone, NC",
                description: "Electrify America DC fast chargers at Walmart, up to 350kW. Near Blowing Rock and Blue Ridge Parkway.",
                url: "https://www.electrifyamerica.com/locate-charger/"
            },
            // Virginia
            {
                name: "Electrify America - Staunton",
                category: "charger",
                lat: 38.1408,
                lng: -79.0556,
                location: "255 Lucy Ln, Staunton, VA",
                description: "Electrify America DC fast chargers at Walmart, up to 350kW. Perfect stop at the north end of Skyline Drive.",
                url: "https://www.electrifyamerica.com/locate-charger/"
            },
            {
                name: "Tesla Supercharger - Waynesboro",
                category: "charger",
                lat: 38.0686,
                lng: -78.9036,
                location: "109 Lucy Ln, Waynesboro, VA",
                description: "Tesla Supercharger with 12 stalls, up to 250kW. Near Skyline Drive and Blue Ridge Parkway junction.",
                url: "https://www.tesla.com/findus"
            },
            {
                name: "Tesla Supercharger - Charlottesville",
                category: "charger",
                lat: 38.0543,
                lng: -78.4975,
                location: "1954 Rio Hill Center, Charlottesville, VA",
                description: "Tesla Supercharger with 12 stalls, up to 250kW. Great stop when heading north from Skyline Drive.",
                url: "https://www.tesla.com/findus"
            },
            // Massachusetts
            {
                name: "Electrify America - Springfield",
                category: "charger",
                lat: 42.1186,
                lng: -72.5428,
                location: "1655 Boston Rd, Springfield, MA",
                description: "Electrify America DC fast chargers at Walmart, up to 350kW. Gateway to New England.",
                url: "https://www.electrifyamerica.com/locate-charger/"
            },
            // New Hampshire
            {
                name: "Electrify America - Hooksett",
                category: "charger",
                lat: 43.0697,
                lng: -71.4378,
                location: "1328 Hooksett Rd, Hooksett, NH",
                description: "Electrify America DC fast chargers, up to 350kW. Key I-93 corridor stop en route to Vermont.",
                url: "https://www.electrifyamerica.com/locate-charger/"
            },
            // Vermont
            {
                name: "ChargePoint DC Fast - Waitsfield",
                category: "charger",
                lat: 44.1861,
                lng: -72.8277,
                location: "5134 Main St, Waitsfield, VT",
                description: "ChargePoint DC fast charger at Mobil station, 180kW. Right in the heart of Mad River Valley near Lawson's Taproom.",
                url: "https://www.chargepoint.com/en-us/drivers/find-charger"
            },
            {
                name: "ChargePoint DC Fast - Mad River Green",
                category: "charger",
                lat: 44.1875,
                lng: -72.8261,
                location: "Village Square, Waitsfield, VT",
                description: "ChargePoint DC fast charger at Mad River Green shopping center, 62kW. Walking distance to local shops and Lawson's.",
                url: "https://www.chargepoint.com/en-us/drivers/find-charger"
            },
            {
                name: "Tesla Supercharger - Waterbury",
                category: "charger",
                lat: 44.3396,
                lng: -72.7530,
                location: "1899 Waterbury-Stowe Rd, Waterbury, VT",
                description: "Tesla Supercharger with 8 stalls near Ben & Jerry's Factory. Popular tourist stop.",
                url: "https://www.tesla.com/findus"
            },
            {
                name: "Electrify America - White River Junction",
                category: "charger",
                lat: 43.6489,
                lng: -72.3195,
                location: "270 N Hartland Rd, White River Junction, VT",
                description: "Electrify America DC fast chargers at Walmart, up to 350kW. Key I-91/I-89 interchange stop.",
                url: "https://www.electrifyamerica.com/locate-charger/"
            },
            {
                name: "NEVI Fast Charger - Bradford",
                category: "charger",
                lat: 43.9931,
                lng: -72.1292,
                location: "172 Waits River Rd, Bradford, VT",
                description: "Vermont NEVI program DC fast charger at Denny Park, up to 150kW. Scenic I-91 corridor charging.",
                url: "https://www.driveelectricvt.com/"
            },
            // Additional DC Fast Chargers to ensure 100-200 mile coverage
            {
                name: "Electrify America - Roanoke",
                category: "charger",
                lat: 37.2756,
                lng: -79.9414,
                location: "4807 Valley View Blvd NW, Roanoke, VA",
                description: "Electrify America DC fast chargers at Target, up to 350kW. Key stop between Blue Ridge Parkway and Skyline Drive.",
                url: "https://www.electrifyamerica.com/locate-charger/"
            },
            {
                name: "Tesla Supercharger - Lynchburg",
                category: "charger",
                lat: 37.3540,
                lng: -79.1784,
                location: "3901 Wards Rd, Lynchburg, VA",
                description: "Tesla Supercharger with 12 stalls, up to 250kW. Strategic stop on US-29 corridor.",
                url: "https://www.tesla.com/findus"
            },
            {
                name: "Electrify America - Tysons Corner",
                category: "charger",
                lat: 38.9187,
                lng: -77.2311,
                location: "8357 Leesburg Pike, Tysons, VA",
                description: "Electrify America DC fast chargers, up to 350kW. Major Northern Virginia hub near I-495 Beltway.",
                url: "https://www.electrifyamerica.com/locate-charger/"
            },
            {
                name: "Tesla Supercharger - Newark",
                category: "charger",
                lat: 40.7282,
                lng: -74.1724,
                location: "450 Broad St, Newark, NJ",
                description: "Tesla Supercharger with 20 stalls, up to 250kW. Key New Jersey Turnpike corridor stop.",
                url: "https://www.tesla.com/findus"
            },
            {
                name: "Electrify America - Edison",
                category: "charger",
                lat: 40.5187,
                lng: -74.4121,
                location: "1931 Route 27, Edison, NJ",
                description: "Electrify America DC fast chargers at Walmart, up to 350kW. Central New Jersey charging hub.",
                url: "https://www.electrifyamerica.com/locate-charger/"
            },
            {
                name: "Tesla Supercharger - Milford",
                category: "charger",
                lat: 41.2223,
                lng: -73.0648,
                location: "1201 Boston Post Rd, Milford, CT",
                description: "Tesla Supercharger with 12 stalls, up to 250kW. Convenient I-95 corridor stop between NY and MA.",
                url: "https://www.tesla.com/findus"
            },
            {
                name: "Electrify America - Hartford",
                category: "charger",
                lat: 41.7410,
                lng: -72.6739,
                location: "495 Flatbush Ave, Hartford, CT",
                description: "Electrify America DC fast chargers, up to 350kW. Central Connecticut charging hub on I-84.",
                url: "https://www.electrifyamerica.com/locate-charger/"
            }
        ];

        // Category icon paths for cluster display
        const categoryIconPaths = {
            brewery: 'assets/images/marker-brewery.svg',
            tastingroom: 'assets/images/marker-tastingroom.svg',
            retailer: 'assets/images/marker-retailer.svg',
            bar: 'assets/images/marker-bar.svg',
            trail: 'assets/images/marker-trail.svg',
            river: 'assets/images/marker-river.svg',
            community: 'assets/images/marker-community.svg',
            charger: 'assets/images/marker-charger.svg'
        };

        // Category display order for consistent icon ordering
        const categoryOrder = ['brewery', 'tastingroom', 'retailer', 'bar', 'trail', 'river', 'community', 'charger'];

        // Create unified marker cluster group with multi-category support
        function createUnifiedClusterIcon(cluster) {
            const markers = cluster.getAllChildMarkers();
            const categories = new Set();

            markers.forEach(marker => {
                if (marker.options.category) {
                    categories.add(marker.options.category);
                }
            });

            const uniqueCategories = categoryOrder.filter(cat => categories.has(cat));
            const count = cluster.getChildCount();

            if (uniqueCategories.length === 1) {
                // Single category - use the classic circular cluster
                const cat = uniqueCategories[0];
                return L.divIcon({
                    html: '<div class="cluster-inner cluster-' + cat + '">' + count + '</div>',
                    className: 'marker-cluster',
                    iconSize: L.point(40, 40)
                });
            } else {
                // Multiple categories - show icons for each type
                const iconsHtml = uniqueCategories.slice(0, 4).map(cat =>
                    '<img src="' + categoryIconPaths[cat] + '" class="cluster-icon" alt="">'
                ).join('');

                const width = Math.min(uniqueCategories.length, 4) * 24 + 36;
                return L.divIcon({
                    html: '<div class="cluster-multi">' + iconsHtml + '<span class="cluster-count">' + count + '</span></div>',
                    className: 'marker-cluster',
                    iconSize: L.point(width, 44)
                });
            }
        }

        const clusterOptions = {
            showCoverageOnHover: false,
            spiderfyOnMaxZoom: true,
            disableClusteringAtZoom: 12,
            maxClusterRadius: 50,
            spiderfyDistanceMultiplier: 1.5,
            iconCreateFunction: createUnifiedClusterIcon
        };

        // Create a unified cluster group for all main markers
        const unifiedCluster = L.markerClusterGroup(clusterOptions);

        // Separate cluster for chargers (only shows with route)
        const chargerCluster = L.markerClusterGroup({
            ...clusterOptions,
            iconCreateFunction: function(cluster) {
                return L.divIcon({
                    html: '<div class="cluster-inner cluster-charger">' + cluster.getChildCount() + '</div>',
                    className: 'marker-cluster',
                    iconSize: L.point(40, 40)
                });
            }
        });

        // Store markers by category for filtering
        const markersByCategory = {
            brewery: [],
            tastingroom: [],
            retailer: [],
            bar: [],
            trail: [],
            river: [],
            community: [],
            charger: []
        };

        // Track which categories are visible
        const visibleCategories = {
            brewery: true,
            tastingroom: true,
            retailer: true,
            bar: true,
            trail: true,
            river: true,
            community: true,
            charger: false
        };

        // Add markers to respective layers
        sunshineSpots.forEach(spot => {
            const icon = createMarkerIcon(spot.category);

            // Build popup content with enhanced information for community partners
            let popupContent = '';

            // Add image if available
            if (spot.image) {
                popupContent += `<img src="${spot.image}" alt="${spot.name}" class="popup-image" loading="lazy">`;
            }

            const categoryLabels = {
                'brewery': 'Brewery',
                'tastingroom': 'Tasting Room',
                'retailer': 'Retailer',
                'bar': 'Bar & Restaurant',
                'trail': 'Trail',
                'river': 'River Put-in',
                'community': 'Community Partner',
                'charger': 'DC Fast Charger'
            };
            const categoryLabel = categoryLabels[spot.category] || spot.category;
            popupContent += `
                <div class="popup-category ${spot.category}">${categoryLabel}</div>
                <div class="popup-title">${spot.name}</div>
                <div class="popup-description">${spot.description}</div>
                <div class="popup-location">${spot.location}</div>
            `;

            // Add impact story for community partners
            if (spot.impact) {
                popupContent += `
                    <div class="popup-impact">
                        <div class="popup-impact-label">Impact Story</div>
                        ${spot.impact}
                    </div>
                `;
            }

            // Add buttons
            if (spot.url || spot.donateUrl) {
                popupContent += '<div class="popup-buttons">';
                if (spot.url) {
                    popupContent += `<a href="${spot.url}" target="_blank" rel="noopener noreferrer" class="popup-btn popup-btn-primary">Learn More</a>`;
                }
                if (spot.donateUrl) {
                    popupContent += `<a href="${spot.donateUrl}" target="_blank" rel="noopener noreferrer" class="popup-btn popup-btn-secondary">Donate</a>`;
                }
                popupContent += '</div>';
            }

            const marker = L.marker([spot.lat, spot.lng], { icon: icon, category: spot.category })
                .bindPopup(popupContent, { maxWidth: 320 });

            // Store marker by category
            markersByCategory[spot.category].push(marker);

            // Add to appropriate cluster
            if (spot.category === 'charger') {
                chargerCluster.addLayer(marker);
            } else {
                unifiedCluster.addLayer(marker);
            }
        });

        // Add unified cluster to map
        unifiedCluster.addTo(map);

        // Function to refresh the unified cluster based on visible categories
        function refreshUnifiedCluster() {
            unifiedCluster.clearLayers();
            Object.entries(markersByCategory).forEach(([category, markers]) => {
                if (category !== 'charger' && visibleCategories[category]) {
                    markers.forEach(marker => unifiedCluster.addLayer(marker));
                }
            });
        }

        // Update counts
        function updateCounts() {
            document.getElementById('count-breweries').textContent = sunshineSpots.filter(s => s.category === 'brewery').length;
            document.getElementById('count-tastingrooms').textContent = sunshineSpots.filter(s => s.category === 'tastingroom').length;
            document.getElementById('count-retailers').textContent = sunshineSpots.filter(s => s.category === 'retailer').length;
            document.getElementById('count-bars').textContent = sunshineSpots.filter(s => s.category === 'bar').length;
            document.getElementById('count-trails').textContent = sunshineSpots.filter(s => s.category === 'trail').length;
            document.getElementById('count-rivers').textContent = sunshineSpots.filter(s => s.category === 'river').length;
            document.getElementById('count-community').textContent = sunshineSpots.filter(s => s.category === 'community').length;
            document.getElementById('count-chargers').textContent = sunshineSpots.filter(s => s.category === 'charger').length;
        }
        updateCounts();

        // Filter functionality - using unified cluster
        document.getElementById('filter-breweries').addEventListener('change', function() {
            visibleCategories.brewery = this.checked;
            refreshUnifiedCluster();
        });

        document.getElementById('filter-tastingrooms').addEventListener('change', function() {
            visibleCategories.tastingroom = this.checked;
            refreshUnifiedCluster();
        });

        document.getElementById('filter-retailers').addEventListener('change', function() {
            visibleCategories.retailer = this.checked;
            refreshUnifiedCluster();
        });

        document.getElementById('filter-bars').addEventListener('change', function() {
            visibleCategories.bar = this.checked;
            refreshUnifiedCluster();
        });

        document.getElementById('filter-trails').addEventListener('change', function() {
            visibleCategories.trail = this.checked;
            refreshUnifiedCluster();
        });

        document.getElementById('filter-rivers').addEventListener('change', function() {
            visibleCategories.river = this.checked;
            refreshUnifiedCluster();
        });

        document.getElementById('filter-community').addEventListener('change', function() {
            visibleCategories.community = this.checked;
            refreshUnifiedCluster();
        });

        document.getElementById('filter-chargers').addEventListener('change', function() {
            visibleCategories.charger = this.checked;
            if (this.checked) {
                map.addLayer(chargerCluster);
            } else {
                map.removeLayer(chargerCluster);
            }
        });

        // Fit map to show all markers with smooth animation
        const allMarkers = sunshineSpots.map(s => [s.lat, s.lng]);
        map.fitBounds(allMarkers, {
            padding: [50, 50],
            animate: true,
            duration: 1.0
        });

        // Zoom hint - hide when zoomed in past level 9
        const zoomHint = document.getElementById('zoom-hint');
        map.on('zoomend', function() {
            if (map.getZoom() >= 9) {
                zoomHint.classList.add('hidden');
            } else {
                zoomHint.classList.remove('hidden');
            }
        });

        // State filtering for community partners
        let currentStateFilter = 'all';
        const stateButtons = document.querySelectorAll('.state-btn');

        // Store original community markers for filtering
        const communityMarkers = [];
        sunshineSpots.filter(s => s.category === 'community').forEach(spot => {
            const icon = createMarkerIcon('community');
            let popupContent = '';
            if (spot.image) {
                popupContent += `<img src="${spot.image}" alt="${spot.name}" class="popup-image" loading="lazy">`;
            }
            popupContent += `
                <div class="popup-category community">Community Partner</div>
                <div class="popup-title">${spot.name}</div>
                <div class="popup-description">${spot.description}</div>
                <div class="popup-location">${spot.location}</div>
            `;
            if (spot.impact) {
                popupContent += `
                    <div class="popup-impact">
                        <div class="popup-impact-label">Impact Story</div>
                        ${spot.impact}
                    </div>
                `;
            }
            if (spot.url || spot.donateUrl) {
                popupContent += '<div class="popup-buttons">';
                if (spot.url) {
                    popupContent += `<a href="${spot.url}" target="_blank" rel="noopener noreferrer" class="popup-btn popup-btn-primary">Learn More</a>`;
                }
                if (spot.donateUrl) {
                    popupContent += `<a href="${spot.donateUrl}" target="_blank" rel="noopener noreferrer" class="popup-btn popup-btn-secondary">Donate</a>`;
                }
                popupContent += '</div>';
            }

            const marker = L.marker([spot.lat, spot.lng], { icon: icon })
                .bindPopup(popupContent, { maxWidth: 320 });

            communityMarkers.push({ marker, state: spot.state, spot });
        });

        function filterByState(state) {
            currentStateFilter = state;

            // Update button states
            stateButtons.forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.state === state) {
                    btn.classList.add('active');
                }
            });

            // Update the markersByCategory.community array based on state filter
            // First, store all community markers if not already done
            if (!window.allCommunityMarkers) {
                window.allCommunityMarkers = [...markersByCategory.community];
            }

            // Filter community markers by state
            if (state === 'all') {
                markersByCategory.community = [...window.allCommunityMarkers];
            } else {
                markersByCategory.community = window.allCommunityMarkers.filter(marker => {
                    const matchingSpot = communityMarkers.find(m => m.marker === marker);
                    return matchingSpot && matchingSpot.state === state;
                });
            }

            // Refresh the unified cluster
            refreshUnifiedCluster();

            // Update community count badge
            const filteredCount = markersByCategory.community.length;
            document.getElementById('count-community').textContent = filteredCount;

            // If filtering to a specific state, zoom to show those markers
            if (state !== 'all') {
                const filteredSpots = communityMarkers.filter(m => m.state === state);
                if (filteredSpots.length > 0) {
                    const bounds = filteredSpots.map(m => [m.spot.lat, m.spot.lng]);
                    map.fitBounds(bounds, {
                        padding: [80, 80],
                        animate: true,
                        duration: 0.5,
                        maxZoom: 10
                    });
                }
            }
        }

        // Add click handlers to state buttons
        stateButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                filterByState(btn.dataset.state);
            });
        });

        // ============================================
        // LIVE IMPACT METRICS - Based on actual Lawson's data
        // ============================================
        // Data sources: Lawson's Impact Reports, Brewbound, CraftBrewingBusiness
        //
        // DONATIONS MODEL (verified data points):
        // - Program started: 2018
        // - 2021: $239,832 donated (confirmed)
        // - 2022: $290,000 donated (confirmed)
        // - By mid-2022: $926,352 cumulative
        // - By mid-2023: $1.25M cumulative
        // - By end 2023: $2M+ cumulative
        // - Current (2026): ~$3M to 496 nonprofits
        // - Growth: Started ~$150k/year, now ~$520k/year
        //
        // SOLAR MODEL (verified data points):
        // - 2019: 43kW rooftop array installed (52,000 kWh/year)
        // - 2022: 215kW solar canopy added (495 panels)
        // - 2023: Additional arrays = 570,000 kWh/year total
        // - 100% solar offset achieved
        //
        // WASTE: 97.2% diversion achieved 2024
        // ============================================

        const impactMetrics = {
            donations: {
                // Base: $3,000,000 as of Jan 1, 2026 (to 496 nonprofits since 2018)
                baseDate: new Date('2026-01-01T00:00:00'),
                baseAmount: 3000000,
                // Current annual rate: ~$520,000/year, growing at 5% annually
                annualRate: 520000,
                annualGrowthRate: 0.05,
                // 10-year projection: ~$9.5M by 2036
            },
            solar: {
                // Cumulative kWh since 2019:
                // 2019-2021: 52,000 kWh/year  3 = 156,000
                // 2022: ~150,000 (canopy added mid-year)
                // 2023-2025: 570,000 kWh/year  3 = 1,710,000
                // Total by Jan 1, 2026: ~2,016,000 kWh
                baseDate: new Date('2026-01-01T00:00:00'),
                baseAmount: 2016000,
                // Current annual rate: 570,000 kWh/year
                annualRate: 570000,
                // Slight efficiency gains: 2% per year
                annualGrowthRate: 0.02,
                // 10-year projection: ~8.5M kWh cumulative by 2036
            },
            waste: {
                // 97.2% waste diversion (achieved 2024)
                // Projecting slight improvement to 98.5% by 2036
                baseDate: new Date('2026-01-01T00:00:00'),
                baseValue: 97.2,
                targetValue: 98.5,
                yearsToTarget: 10
            }
        };

        function calculateCurrentDonations() {
            const now = new Date();
            const msElapsed = now - impactMetrics.donations.baseDate;
            const yearsElapsed = msElapsed / (1000 * 60 * 60 * 24 * 365.25);

            if (yearsElapsed < 0) {
                // Before base date, calculate backwards
                return impactMetrics.donations.baseAmount;
            }

            // Calculate with compound growth on the rate
            let totalAdded = 0;
            const baseRate = impactMetrics.donations.annualRate;
            const growth = impactMetrics.donations.annualGrowthRate;

            // For continuous calculation, integrate the growth
            // Simplified: use average rate for the period
            const avgRate = baseRate * (1 + growth * yearsElapsed / 2);
            totalAdded = avgRate * yearsElapsed;

            return impactMetrics.donations.baseAmount + totalAdded;
        }

        function calculateCurrentSolar() {
            const now = new Date();
            const msElapsed = now - impactMetrics.solar.baseDate;
            const yearsElapsed = msElapsed / (1000 * 60 * 60 * 24 * 365.25);

            if (yearsElapsed < 0) {
                return impactMetrics.solar.baseAmount;
            }

            // Calculate with slight efficiency gains
            const baseRate = impactMetrics.solar.annualRate;
            const growth = impactMetrics.solar.annualGrowthRate;
            const avgRate = baseRate * (1 + growth * yearsElapsed / 2);
            const totalAdded = avgRate * yearsElapsed;

            return impactMetrics.solar.baseAmount + totalAdded;
        }

        function calculateCurrentWaste() {
            const now = new Date();
            const msElapsed = now - impactMetrics.waste.baseDate;
            const yearsElapsed = msElapsed / (1000 * 60 * 60 * 24 * 365.25);

            if (yearsElapsed < 0) {
                return impactMetrics.waste.baseValue;
            }

            // Linear progression toward target
            const progress = Math.min(yearsElapsed / impactMetrics.waste.yearsToTarget, 1);
            const increase = (impactMetrics.waste.targetValue - impactMetrics.waste.baseValue) * progress;

            return impactMetrics.waste.baseValue + increase;
        }

        // Smooth animated counter that transitions to a target value
        function animateToValue(element, targetValue, duration, formatFn) {
            const startValue = parseFloat(element.textContent.replace(/[,$]/g, '')) || 0;
            const startTime = performance.now();

            function update(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const easeOutQuart = 1 - Math.pow(1 - progress, 4);
                const currentValue = startValue + (targetValue - startValue) * easeOutQuart;

                element.textContent = formatFn(currentValue);

                if (progress < 1) {
                    requestAnimationFrame(update);
                }
            }

            requestAnimationFrame(update);
        }

        // Format functions
        const formatDollars = (val) => Math.floor(val).toLocaleString();
        const formatKwh = (val) => Math.floor(val).toLocaleString();
        const formatPercent = (val) => val.toFixed(1);

        // Live ticker update
        let metricsStarted = false;
        let tickerInterval = null;

        function startLiveTicker() {
            if (metricsStarted) return;
            metricsStarted = true;

            const donationsEl = document.getElementById('donations-counter');
            const solarEl = document.getElementById('solar-counter');

            // Initial animation from 0 to current values
            const currentDonations = calculateCurrentDonations();
            const currentSolar = calculateCurrentSolar();

            animateToValue(donationsEl, currentDonations, 2500, formatDollars);
            animateToValue(solarEl, currentSolar, 2500, formatKwh);

            // After initial animation, start live updates every 100ms
            // This makes the counters tick up in real-time showing ongoing impact
            setTimeout(() => {
                tickerInterval = setInterval(() => {
                    if (donationsEl) {
                        donationsEl.textContent = formatDollars(calculateCurrentDonations());
                    }
                    if (solarEl) {
                        solarEl.textContent = formatKwh(calculateCurrentSolar());
                    }
                }, 100);
            }, 2600);
        }

        // Use Intersection Observer to trigger animation when visible
        const metricsSection = document.querySelector('.metrics-section');
        if (metricsSection) {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        startLiveTicker();
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.3 });

            observer.observe(metricsSection);
        }

        // ============================================
        // SCENIC ROUTE OVERLAYS
        // The Sunshine Trail: Asheville, NC to Waitsfield, VT
        // ============================================

        // Define scenic route coordinates
        // Blue Ridge Parkway: Asheville, NC (Milepost 382) to Waynesboro, VA (Milepost 0)
        const blueRidgeParkway = [
            [35.5951, -82.5515],  // Asheville, NC
            [35.6810, -82.4920],  // Craggy Gardens
            [35.7972, -82.9569],  // Max Patch area
            [35.9150, -82.2760],  // Mount Mitchell area
            [36.1064, -82.1098],  // Roan Mountain
            [36.2987, -81.6904],  // Blowing Rock
            [36.3396, -81.4996],  // Boone area
            [36.5569, -80.9897],  // Fancy Gap
            [36.7180, -80.4070],  // Mabry Mill
            [37.0889, -80.1869],  // Roanoke area
            [37.2390, -80.0328],  // McAfee Knob area
            [37.4530, -79.6190],  // Natural Bridge
            [37.6600, -79.3400],  // Lexington area
            [37.8600, -79.0800],  // Staunton area
            [38.0330, -78.8690],  // Waynesboro (BRP northern terminus)
        ];

        // Skyline Drive: Waynesboro (Rockfish Gap) to Front Royal
        const skylineDrive = [
            [38.0330, -78.8690],  // Rockfish Gap (southern entrance)
            [38.1900, -78.7500],  // Swift Run Gap
            [38.3000, -78.6800],  // Big Meadows
            [38.4500, -78.5500],  // Skyland
            [38.5533, -78.3161],  // Old Rag nearby
            [38.6300, -78.3800],  // Thornton Gap
            [38.7500, -78.2800],  // Dickey Ridge
            [38.9030, -78.1940],  // Front Royal (northern terminus)
        ];

        // Connector Route: Front Royal, VA to Bennington, VT via I-81 / I-87 / US-7
        const connectorRoute = [
            [38.9030, -78.1940],  // Front Royal, VA
            [39.1850, -77.5100],  // Winchester, VA
            [39.4580, -77.4000],  // Hagerstown, MD
            [39.7600, -77.5700],  // Chambersburg, PA
            [40.2700, -76.8800],  // Harrisburg, PA
            [40.5800, -75.4900],  // Allentown area
            [41.0400, -74.1300],  // Northern NJ
            [41.7000, -73.9200],  // Poughkeepsie, NY
            [42.2500, -73.7900],  // Hudson, NY
            [42.6500, -73.7500],  // Albany area
            [42.8800, -73.2000],  // Bennington, VT
        ];

        // Vermont Route 100: Wilmington to Waitsfield
        const route100Vermont = [
            [42.8800, -73.2000],  // Bennington (connector)
            [42.8678, -72.8711],  // Wilmington
            [43.1597, -72.7792],  // Jamaica
            [43.2600, -72.7400],  // Londonderry
            [43.3890, -72.7000],  // Weston
            [43.4700, -72.7300],  // Ludlow
            [43.5500, -72.7100],  // Plymouth
            [43.6200, -72.8000],  // Killington
            [43.7100, -72.8200],  // Pittsfield
            [43.8800, -72.8400],  // Rochester / Hancock
            [43.9700, -72.8400],  // Granville (Moss Glen Falls)
            [44.0800, -72.8200],  // Warren
            [44.1852, -72.8288],  // Waitsfield (Lawson's HQ!)
            [44.3856, -72.7469],  // Waterbury (Cold Hollow)
            [44.4654, -72.6874],  // Stowe
        ];

        // Create route layers
        const routeLayers = L.layerGroup();

        const blueRidgePolyline = L.polyline(blueRidgeParkway, {
            color: '#2E86AB',
            weight: 5,
            opacity: 0.85,
            smoothFactor: 1.5,
            dashArray: null
        }).bindPopup('<strong>Blue Ridge Parkway</strong><br>469 miles of America\'s most scenic mountain road, connecting Great Smoky Mountains to Shenandoah National Park.');

        const skylinePolyline = L.polyline(skylineDrive, {
            color: '#7B68EE',
            weight: 5,
            opacity: 0.85,
            smoothFactor: 1.5,
            dashArray: null
        }).bindPopup('<strong>Skyline Drive</strong><br>105 miles through Shenandoah National Park with 75 scenic overlooks and stunning Blue Ridge views.');

        const connectorPolyline = L.polyline(connectorRoute, {
            color: '#888888',
            weight: 3,
            opacity: 0.6,
            smoothFactor: 1.5,
            dashArray: '10, 10'
        }).bindPopup('<strong>Connector Route</strong><br>Interstate and highway connection from Shenandoah to southern Vermont via the Hudson Valley.');

        const route100Polyline = L.polyline(route100Vermont, {
            color: '#228B22',
            weight: 5,
            opacity: 0.85,
            smoothFactor: 1.5,
            dashArray: null
        }).bindPopup('<strong>Vermont Route 100</strong><br>217 miles through the Green Mountains - Vermont\'s "Main Street" and the best fall foliage drive in New England.');

        // Add all routes to the layer group
        routeLayers.addLayer(blueRidgePolyline);
        routeLayers.addLayer(skylinePolyline);
        routeLayers.addLayer(connectorPolyline);
        routeLayers.addLayer(route100Polyline);

        // Toggle scenic route visibility
        const routeToggle = document.getElementById('toggle-scenic-route');
        const routeLegend = document.getElementById('route-legend');
        const chargerFilter = document.getElementById('filter-chargers');
        const chargerFilterItem = chargerFilter.closest('.filter-item');

        // Initially disable charger filter (route not shown)
        chargerFilter.checked = false;
        chargerFilter.disabled = true;
        chargerFilterItem.style.opacity = '0.5';
        chargerFilterItem.title = 'Enable "Show The Sunshine Trail Route" to see DC Fast Chargers';

        routeToggle.addEventListener('change', function() {
            if (this.checked) {
                map.addLayer(routeLayers);
                routeLegend.style.display = 'flex';

                // Show chargers when route is shown
                map.addLayer(chargerCluster);
                visibleCategories.charger = true;
                chargerFilter.checked = true;
                chargerFilter.disabled = false;
                chargerFilterItem.style.opacity = '1';
                chargerFilterItem.title = '';

                // Animate to show full route
                const fullRoute = [
                    ...blueRidgeParkway,
                    ...skylineDrive,
                    ...connectorRoute,
                    ...route100Vermont
                ];
                map.fitBounds(fullRoute, {
                    padding: [50, 50],
                    animate: true,
                    duration: 1.0
                });
            } else {
                map.removeLayer(routeLayers);
                routeLegend.style.display = 'none';

                // Hide chargers when route is hidden
                map.removeLayer(chargerCluster);
                visibleCategories.charger = false;
                chargerFilter.checked = false;
                chargerFilter.disabled = true;
                chargerFilterItem.style.opacity = '0.5';
                chargerFilterItem.title = 'Enable "Show The Sunshine Trail Route" to see DC Fast Chargers';
            }
        });
    </script>
</body>
</html>
