<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Sunshine Trail | Lawson's Finest Liquids</title>
    <meta name="description" content="Explore Sunshine Spots from Waitsfield, VT to Asheville, NC. Interactive map of retailers, hiking trails, river put-ins, and community partners along the Appalachian corridor.">
    <meta name="theme-color" content="#2d2a26">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Lawson's Finest brand colors - extracted from website */
            --sunshine-gold: #EAC054;      /* Primary gold from "Explore" text & Beer Finder button */
            --sunshine-orange: #E87722;    /* Orange from sun logo */
            --sunshine-red: #C13A28;       /* Red accent from sun logo */
            --deep-brown: #2d2a26;         /* Logo text color */
            --forest-green: #3A5F3A;       /* Trail marker - earthy green */
            --river-blue: #4A90A4;         /* River marker - mountain stream blue */
            --community-purple: #7B5B9A;   /* Community marker - softer purple */
            --cream: #FFFBF2;              /* Warm cream background */
            --light-gold: #FDF5E6;         /* Light gold for highlights */
            --amber: #FCB900;              /* Luminous amber from site */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            background-color: var(--cream);
            color: var(--deep-brown);
        }

        header {
            background: #ffffff;
            color: var(--deep-brown);
            padding: 0.75rem 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid #e5e5e5;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .header-trail-logo {
            height: 55px;
            width: auto;
        }

        .brand-logo-link {
            display: flex;
            align-items: center;
        }

        .header-brand-logo {
            height: 38px;
            width: auto;
            opacity: 1;
            transition: opacity 0.2s;
        }

        .header-brand-logo:hover {
            opacity: 0.8;
        }

        h1 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 800;
            font-size: 1.6rem;
            letter-spacing: 0.5px;
            color: var(--deep-brown);
        }

        h1 span {
            color: var(--sunshine-gold);
        }

        .tagline {
            font-size: 0.8rem;
            color: #666;
            font-weight: 400;
            margin-top: 0.15rem;
        }

        .filter-icon {
            width: 28px;
            height: 28px;
            object-fit: contain;
        }

        main {
            display: flex;
            height: calc(100vh - 110px); /* Account for header and footer */
        }

        .sidebar {
            width: 320px;
            background: white;
            padding: 1.5rem;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }

        .sidebar h2 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: var(--deep-brown);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .intro-text {
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: 1.5rem;
            color: #555;
        }

        .filter-section {
            margin-bottom: 1.5rem;
        }

        .filter-section h3 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.75rem;
            color: var(--deep-brown);
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .filter-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 6px;
            transition: background-color 0.2s;
        }

        .filter-item:hover {
            background-color: var(--light-gold);
        }

        .filter-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--sunshine-gold);
        }

        .filter-item label {
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }


        .count-badge {
            background: var(--light-gold);
            padding: 0.15rem 0.5rem;
            border-radius: 10px;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--deep-brown);
        }

        .legend {
            background: var(--light-gold);
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
        }

        .legend h4 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 0.85rem;
            margin-bottom: 0.75rem;
        }

        .legend p {
            font-size: 0.8rem;
            line-height: 1.5;
            color: #555;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8rem;
            margin-bottom: 0.4rem;
        }

        #map {
            flex: 1;
            height: 100%;
        }

        /* Smooth Leaflet transitions */
        .leaflet-tile-container {
            transform: translateZ(0);
            will-change: transform;
        }

        .leaflet-zoom-anim .leaflet-zoom-animated {
            transition: transform 0.25s cubic-bezier(0.25, 0.1, 0.25, 1);
        }

        .leaflet-pan-anim .leaflet-tile,
        .leaflet-pan-anim .leaflet-marker-pane {
            transition: transform 0.25s ease-out;
        }

        .leaflet-fade-anim .leaflet-popup {
            transition: opacity 0.2s ease-in-out;
        }

        .leaflet-marker-icon {
            transition: transform 0.15s ease-out;
        }

        .leaflet-marker-icon:hover {
            transform: scale(1.15);
        }

        /* Custom Leaflet popup styles */
        .leaflet-popup-content-wrapper {
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .leaflet-popup-content {
            margin: 12px 16px;
            font-family: 'Open Sans', sans-serif;
        }

        .popup-title {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 1rem;
            color: var(--deep-brown);
            margin-bottom: 0.5rem;
        }

        .popup-category {
            display: inline-block;
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
        }

        .popup-category.retailer { background: var(--sunshine-gold); color: var(--deep-brown); }
        .popup-category.trail { background: var(--forest-green); color: white; }
        .popup-category.river { background: var(--river-blue); color: white; }
        .popup-category.community { background: var(--community-purple); color: white; }

        .popup-content-wrapper {
            max-height: 400px;
            overflow-y: auto;
        }

        .popup-description {
            font-size: 0.85rem;
            line-height: 1.5;
            color: #555;
            margin-bottom: 0.5rem;
        }

        .popup-location {
            font-size: 0.8rem;
            color: #777;
        }

        .popup-link {
            display: inline-block;
            margin-top: 0.5rem;
            color: var(--river-blue);
            text-decoration: none;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .popup-link:hover {
            text-decoration: underline;
        }

        .popup-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: 6px;
            margin-bottom: 0.75rem;
        }

        .popup-impact {
            background: var(--light-gold);
            padding: 0.6rem;
            border-radius: 6px;
            margin: 0.5rem 0;
            font-size: 0.8rem;
            line-height: 1.5;
            border-left: 3px solid var(--sunshine-gold);
        }

        .popup-impact-label {
            font-weight: 600;
            color: var(--deep-brown);
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.25rem;
        }

        .popup-buttons {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .popup-btn {
            display: inline-block;
            padding: 0.4rem 0.75rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            text-decoration: none;
            text-align: center;
            flex: 1;
        }

        .popup-btn-primary {
            background: var(--sunshine-gold);
            color: var(--deep-brown);
        }

        .popup-btn-secondary {
            background: var(--deep-brown);
            color: var(--cream);
        }

        .popup-btn:hover {
            opacity: 0.9;
        }

        /* Custom marker styles */
        .leaflet-marker-icon {
            background: transparent !important;
            border: none !important;
            box-shadow: none !important;
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            main {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                height: auto;
                max-height: 40vh;
                order: 2;
            }

            #map {
                height: 60vh;
                order: 1;
            }

            header {
                flex-direction: column;
                text-align: center;
                gap: 0.75rem;
                padding: 0.75rem 1rem;
            }

            h1 {
                font-size: 1.3rem;
            }

            .header-trail-logo {
                height: 45px;
            }

            .header-brand-logo {
                height: 30px;
            }
        }

        .footer-bar {
            background: var(--deep-brown);
            color: var(--cream);
            padding: 0.5rem 1.5rem;
            font-size: 0.8rem;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .footer-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
        }

        .footer-tagline {
            opacity: 0.9;
        }

        .footer-link {
            color: var(--sunshine-gold);
            text-decoration: none;
            font-weight: 600;
        }

        .footer-link:hover {
            text-decoration: underline;
        }

        .footer-bcorp {
            height: 32px;
            width: auto;
            filter: brightness(0) invert(1);
            opacity: 0.85;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo-section">
            <img src="assets/images/sunshine-trail-logo.svg" alt="The Sunshine Trail" class="header-trail-logo">
            <div>
                <h1>The <span>Sunshine</span> Trail</h1>
                <p class="tagline">Mountain communities. Outdoor adventures. Cold beer.</p>
            </div>
        </div>
        <a href="https://www.lawsonsfinest.com" target="_blank" rel="noopener noreferrer" class="brand-logo-link">
            <img src="assets/images/lawsons-logo.svg" alt="Lawson's Finest Liquids" class="header-brand-logo">
        </a>
    </header>

    <main>
        <aside class="sidebar">
            <p class="intro-text">
                Explore the <strong>Sunshine Spots</strong> from Waitsfield, Vermont to Asheville, North Carolina.
                Discover retailers, hiking trails, river put-ins, and the community organizations we support along the way.
                These mountain communities share a love of hiking, respect for nature, and appreciation for a cold beer after a long day outside.
            </p>

            <div class="filter-section">
                <h3>Filter by Category</h3>
                <div class="filter-group">
                    <div class="filter-item">
                        <input type="checkbox" id="filter-retailers" checked>
                        <label for="filter-retailers">
                            <img src="assets/images/marker-retailer.png" alt="" class="filter-icon">
                            Retailers
                            <span class="count-badge" id="count-retailers">0</span>
                        </label>
                    </div>
                    <div class="filter-item">
                        <input type="checkbox" id="filter-trails" checked>
                        <label for="filter-trails">
                            <img src="assets/images/marker-trail.png" alt="" class="filter-icon">
                            Trails
                            <span class="count-badge" id="count-trails">0</span>
                        </label>
                    </div>
                    <div class="filter-item">
                        <input type="checkbox" id="filter-rivers" checked>
                        <label for="filter-rivers">
                            <img src="assets/images/marker-river.png" alt="" class="filter-icon">
                            River Put-ins
                            <span class="count-badge" id="count-rivers">0</span>
                        </label>
                    </div>
                    <div class="filter-item">
                        <input type="checkbox" id="filter-community" checked>
                        <label for="filter-community">
                            <img src="assets/images/marker-community.png" alt="" class="filter-icon">
                            Community Partners
                            <span class="count-badge" id="count-community">0</span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="legend">
                <h4>About This Trail</h4>
                <p>
                    The Sunshine Trail celebrates the shared culture of mountain communities along the East Coast -
                    from the Green Mountains of Vermont to the Blue Ridge of North Carolina.
                    Every spot on this map represents our commitment to quality, community, and the great outdoors.
                </p>
            </div>
        </aside>

        <div id="map" role="application" aria-label="Interactive map of Sunshine Trail locations from Vermont to North Carolina"></div>
    </main>

    <footer class="footer-bar">
        <div class="footer-content">
            <span class="footer-tagline">Finest. Freshest. Always Kept Cold.&trade;</span>
            <a href="https://www.lawsonsfinest.com" target="_blank" rel="noopener noreferrer" class="footer-link">lawsonsfinest.com</a>
            <img src="assets/images/b-corp-logo.png" alt="Certified B Corporation" class="footer-bcorp">
        </div>
    </footer>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin="anonymous"></script>
    <script>
        // Initialize the map with smooth scrolling and animations
        const map = L.map('map', {
            center: [39.5, -77.5],
            zoom: 6,
            zoomControl: true,
            scrollWheelZoom: true,
            zoomSnap: 0.1,              // Allow finer zoom levels
            zoomDelta: 0.25,            // Smaller zoom steps for smoother feel
            wheelPxPerZoomLevel: 100,   // More wheel movement per zoom level
            wheelDebounceTime: 40,      // Responsive wheel zoom
            zoomAnimation: true,
            fadeAnimation: true,
            markerZoomAnimation: true,
            inertia: true,
            inertiaDeceleration: 2000,  // Smooth deceleration
            inertiaMaxSpeed: 2000,
            easeLinearity: 0.2,         // Smoother easing
            tap: true,
            touchZoom: true,
            doubleClickZoom: true,
            boxZoom: true
        });

        // Add a styled tile layer with smooth transitions
        L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 19,
            updateWhenZooming: false,
            updateWhenIdle: true,
            keepBuffer: 4
        }).addTo(map);

        // Define marker icons - using custom images
        const markerIcons = {
            retailer: L.icon({
                iconUrl: 'assets/images/marker-retailer.png',
                iconSize: [40, 40],
                iconAnchor: [20, 40],
                popupAnchor: [0, -40]
            }),
            trail: L.icon({
                iconUrl: 'assets/images/marker-trail.png',
                iconSize: [40, 48],
                iconAnchor: [20, 48],
                popupAnchor: [0, -48]
            }),
            river: L.icon({
                iconUrl: 'assets/images/marker-river.png',
                iconSize: [44, 40],
                iconAnchor: [22, 40],
                popupAnchor: [0, -40]
            }),
            community: L.icon({
                iconUrl: 'assets/images/marker-community.png',
                iconSize: [36, 44],
                iconAnchor: [18, 44],
                popupAnchor: [0, -44]
            })
        };

        // Get marker icon for category
        function createMarkerIcon(category) {
            return markerIcons[category];
        }

        // Sunshine Trail Data
        const sunshineSpots = [
            // === RETAILERS ===
            // Vermont
            {
                name: "Lawson's Finest Liquids Taproom",
                category: "retailer",
                lat: 44.1852,
                lng: -72.8288,
                location: "Waitsfield, VT",
                description: "The home of Sip of Sunshine. Visit our taproom for the freshest pours and exclusive releases.",
                url: "https://www.lawsonsfinest.com"
            },
            {
                name: "Mad River Taste Place",
                category: "retailer",
                lat: 44.1870,
                lng: -72.8256,
                location: "Waitsfield, VT",
                description: "The Valley's go-to destination for Vermont craft beer, local cider, wine, and hyper-local spirits.",
                url: "https://madrivervalley.com"
            },
            {
                name: "Mehuron's Supermarket",
                category: "retailer",
                lat: 44.1858,
                lng: -72.8271,
                location: "Waitsfield, VT",
                description: "Local grocery with an excellent Vermont craft beer selection including Lawson's Finest.",
                url: null
            },
            {
                name: "JD's Quick Stop",
                category: "retailer",
                lat: 43.9289,
                lng: -72.8411,
                location: "Hancock, VT",
                description: "Famous beer cave with a curated selection of Vermont's finest including Lawson's, Heady Topper, and more.",
                url: null
            },
            // Massachusetts
            {
                name: "Craft Beer Cellar - Belmont",
                category: "retailer",
                lat: 42.3962,
                lng: -71.1784,
                location: "Belmont, MA",
                description: "Premier craft beer retailer featuring rotating selections from Lawson's Finest Liquids.",
                url: "https://craftbeercellar.com"
            },
            {
                name: "Blanchard's Liquors",
                category: "retailer",
                lat: 42.3151,
                lng: -71.0589,
                location: "Boston, MA",
                description: "Boston's destination for craft beer with regular Lawson's Finest availability.",
                url: null
            },
            // Connecticut
            {
                name: "Two Roads Brewing Company",
                category: "retailer",
                lat: 41.2226,
                lng: -73.1353,
                location: "Stratford, CT",
                description: "Our brewing partner - Sip of Sunshine is brewed here. Visit the taproom for fresh pours.",
                url: "https://tworoadsbrewing.com"
            },
            // New York
            {
                name: "Whole Foods Market - Union Square",
                category: "retailer",
                lat: 40.7359,
                lng: -73.9911,
                location: "New York, NY",
                description: "Quality craft beer selection in Manhattan including Lawson's Finest offerings.",
                url: null
            },
            // Pennsylvania
            {
                name: "Monk's Cafe",
                category: "retailer",
                lat: 39.9478,
                lng: -75.1639,
                location: "Philadelphia, PA",
                description: "Legendary Philadelphia beer bar known for exceptional craft selections.",
                url: "https://monkscafe.com"
            },
            {
                name: "Tired Hands Brewing Company",
                category: "retailer",
                lat: 40.0054,
                lng: -75.3099,
                location: "Ardmore, PA",
                description: "Award-winning brewery and fermentaria with rotating guest taps.",
                url: "https://tiredhands.com"
            },
            // Virginia
            {
                name: "Total Wine & More - Richmond",
                category: "retailer",
                lat: 37.5955,
                lng: -77.5201,
                location: "Richmond, VA",
                description: "Extensive craft beer selection with regular Lawson's Finest availability.",
                url: "https://totalwine.com"
            },
            {
                name: "The Veil Brewing Co.",
                category: "retailer",
                lat: 37.5541,
                lng: -77.4599,
                location: "Richmond, VA",
                description: "Richmond's favorite brewery - check for Lawson's guest taps and events.",
                url: "https://theveilbrewing.com"
            },
            // North Carolina
            {
                name: "Weinhaus",
                category: "retailer",
                lat: 35.5951,
                lng: -82.5515,
                location: "Asheville, NC",
                description: "Downtown Asheville's oldest and largest bottle shop with 12 local NC beers on tap.",
                url: "https://weinhaus.com"
            },
            {
                name: "Local 604 Bottle Shop - West",
                category: "retailer",
                lat: 35.5847,
                lng: -82.5760,
                location: "Asheville, NC",
                description: "West Asheville's best little bottle shop with over 20 local breweries represented.",
                url: "https://local604avl.com"
            },
            {
                name: "The Whale - A Craft Beer Collective",
                category: "retailer",
                lat: 35.5943,
                lng: -82.5540,
                location: "Asheville, NC",
                description: "Exceptional craft beer selection - one of the best bottle shops on the East Coast.",
                url: null
            },
            {
                name: "Appalachian Vintner",
                category: "retailer",
                lat: 35.6012,
                lng: -82.5568,
                location: "Asheville, NC",
                description: "Great selection and one-stop shopping for beer and wine in Asheville.",
                url: null
            },

            // === TRAILS ===
            // Vermont
            {
                name: "Camel's Hump via Long Trail",
                category: "trail",
                lat: 44.3198,
                lng: -72.8862,
                location: "Duxbury, VT",
                description: "Vermont's most iconic mountain with 360-degree views. 6.8 miles round trip. One of only four peaks in Vermont with alpine tundra.",
                url: "https://www.greenmountainclub.org"
            },
            {
                name: "Stratton Mountain",
                category: "trail",
                lat: 43.0822,
                lng: -72.9089,
                location: "Stratton, VT",
                description: "Where Benton MacKaye conceived the Appalachian Trail. Features peaceful streams, meadows, and pristine Stratton Pond.",
                url: null
            },
            {
                name: "Mount Mansfield - Long Trail",
                category: "trail",
                lat: 44.5437,
                lng: -72.8143,
                location: "Stowe, VT",
                description: "Vermont's highest peak at 4,393 ft. Stunning ridge walk along 'The Chin' with alpine scenery.",
                url: null
            },
            // New Hampshire
            {
                name: "Franconia Ridge Loop",
                category: "trail",
                lat: 44.1604,
                lng: -71.6447,
                location: "Franconia, NH",
                description: "One of the premier day hikes in the entire country. Above-treeline ridge walk with 360-degree views. 8.9 miles.",
                url: "https://www.outdoors.org"
            },
            {
                name: "Mount Washington via Tuckerman Ravine",
                category: "trail",
                lat: 44.2706,
                lng: -71.3033,
                location: "Pinkham Notch, NH",
                description: "The Northeast's highest peak at 6,288 ft. Historic and challenging. Once held the world wind speed record.",
                url: null
            },
            // Massachusetts
            {
                name: "Mount Greylock - Appalachian Trail",
                category: "trail",
                lat: 42.6376,
                lng: -73.1662,
                location: "Adams, MA",
                description: "Massachusetts' highest point at 3,491 ft. The AT passes over the summit with panoramic views of five states.",
                url: null
            },
            {
                name: "Taconic Highlands - Mount Everett",
                category: "trail",
                lat: 42.0977,
                lng: -73.4374,
                location: "Mount Washington, MA",
                description: "A 17-mile AT section with old-growth forest, waterfalls, and open summits without crossing a single road.",
                url: null
            },
            // Pennsylvania
            {
                name: "Hawk Mountain Sanctuary",
                category: "trail",
                lat: 40.6359,
                lng: -75.9871,
                location: "Kempton, PA",
                description: "World-renowned raptor migration site. Over 20,000 hawks fly over each fall. Multiple scenic overlooks.",
                url: "https://hawkmountain.org"
            },
            {
                name: "The Pinnacle",
                category: "trail",
                lat: 40.5805,
                lng: -75.9143,
                location: "Hamburg, PA",
                description: "Considered by many to be the AT's best view in Pennsylvania. 9-mile loop with stunning rock formations.",
                url: null
            },
            // Virginia
            {
                name: "McAfee Knob",
                category: "trail",
                lat: 37.2390,
                lng: -80.0328,
                location: "Salem, VA",
                description: "The most photographed spot on the entire Appalachian Trail. Iconic rock outcrop with widescreen mountain views. 8.8 miles.",
                url: null
            },
            {
                name: "Three Ridges Wilderness",
                category: "trail",
                lat: 37.9189,
                lng: -79.0168,
                location: "Waynesboro, VA",
                description: "Scenic views, 40-foot waterfalls, and swimming holes. A challenging but rewarding AT section.",
                url: null
            },
            {
                name: "Old Rag Mountain",
                category: "trail",
                lat: 38.5533,
                lng: -78.3161,
                location: "Shenandoah NP, VA",
                description: "Virginia's most popular hike. Iconic rock scramble with 360-degree views from the summit.",
                url: "https://www.nps.gov/shen"
            },
            // North Carolina
            {
                name: "Max Patch",
                category: "trail",
                lat: 35.7972,
                lng: -82.9569,
                location: "Hot Springs, NC",
                description: "A rolling, grassy mountaintop bald with endless wildflowers and stunning 360-degree panoramas. One of our favorites on the AT.",
                url: null
            },
            {
                name: "Roan Highlands - Carvers Gap",
                category: "trail",
                lat: 36.1064,
                lng: -82.1098,
                location: "Roan Mountain, NC/TN",
                description: "Rolling balds with fields of wildflowers. Hike to Round Bald, Jane Bald, and Grassy Ridge for incredible views.",
                url: null
            },
            {
                name: "Craggy Gardens",
                category: "trail",
                lat: 35.7019,
                lng: -82.3790,
                location: "Blue Ridge Parkway, NC",
                description: "Famous for rhododendron blooms. Easy to moderate trails with panoramic Blue Ridge views.",
                url: "https://www.nps.gov/blri"
            },
            {
                name: "Looking Glass Rock",
                category: "trail",
                lat: 35.2957,
                lng: -82.7877,
                location: "Pisgah NF, NC",
                description: "Iconic granite dome near Brevard. Challenging 6.5-mile hike rewarded with spectacular views.",
                url: null
            },

            // === RIVER PUT-INS ===
            // Vermont
            {
                name: "Mad River - Waitsfield Access",
                category: "river",
                lat: 44.1892,
                lng: -72.8301,
                location: "Waitsfield, VT",
                description: "Local favorite for kayaking and swimming. Class I-II rapids through the heart of the Mad River Valley.",
                url: null
            },
            {
                name: "White River - Chelsea Park",
                category: "river",
                lat: 43.7832,
                lng: -72.4689,
                location: "Sharon, VT",
                description: "Vermont's longest undammed river. Popular put-in for scenic day paddles with few portages required.",
                url: "https://vermontriverconservancy.org"
            },
            {
                name: "Connecticut River - Wilgus State Park",
                category: "river",
                lat: 43.4397,
                lng: -72.4128,
                location: "Ascutney, VT",
                description: "Canoe and kayak rentals available. Part of the 400-mile Connecticut River Paddlers' Trail.",
                url: null
            },
            // New Hampshire
            {
                name: "Connecticut River - Hanover",
                category: "river",
                lat: 43.7022,
                lng: -72.2896,
                location: "Hanover, NH",
                description: "Easy access point on New England's longest river. Beautiful paddling through scenic Upper Valley.",
                url: null
            },
            // Virginia
            {
                name: "James River - Buchanan",
                category: "river",
                lat: 37.5275,
                lng: -79.6787,
                location: "Buchanan, VA",
                description: "Upper James River Water Trail access. 64 miles of paddling through the Allegheny and Blue Ridge Mountains.",
                url: "https://upperjamesriverwatertrail.com"
            },
            {
                name: "Roanoke River Blueway - Wasena Park",
                category: "river",
                lat: 37.2620,
                lng: -79.9571,
                location: "Roanoke, VA",
                description: "Voted one of the best urban kayaking spots in the US. Easy float through Virginia's Blue Ridge.",
                url: "https://visitroanokeva.com"
            },
            {
                name: "New River - McCoy Access",
                category: "river",
                lat: 37.2419,
                lng: -80.6009,
                location: "Giles County, VA",
                description: "Start of the 37-mile New River Water Trail. Class I to III rapids through stunning mountain scenery.",
                url: null
            },
            // North Carolina
            {
                name: "French Broad River - Asheville",
                category: "river",
                lat: 35.5707,
                lng: -82.5779,
                location: "Asheville, NC",
                description: "The heart of Asheville's outdoor scene. Multiple access points for tubing, kayaking, and paddleboarding.",
                url: "https://frenchbroadpaddle.com"
            },
            {
                name: "French Broad River - Headwaters",
                category: "river",
                lat: 35.1430,
                lng: -82.8256,
                location: "Rosman, NC",
                description: "Headwaters Outfitters offers 3-7 hour self-guided trips. Pristine paddling southwest of Asheville.",
                url: null
            },
            {
                name: "Yadkin River - Surry County",
                category: "river",
                lat: 36.4117,
                lng: -80.6776,
                location: "Elkin, NC",
                description: "Over 100 miles of canoe/kayak waters. Surry County has more river access points than any other NC county.",
                url: "https://yadkinvalleync.com"
            },

            // === COMMUNITY PARTNERS ===
            // Verified Lawson's Finest Liquids donation recipients from Cosmic Shift IPA,
            // Sunshine Fund, GivingTuesday, and Good Brews for a Cause programs.
            // Total: $3M+ donated to 400+ nonprofits since 2018.

            // VERMONT - Sunshine Fund & Home State Partners
            {
                name: "Vermont Foodbank",
                category: "community",
                lat: 44.2004,
                lng: -72.5073,
                location: "Barre, VT",
                description: "Vermont's largest hunger-relief organization, serving all 14 counties through a network of food shelves, meal sites, and community programs.",
                impact: "Thanks to support from Lawson's Cosmic Shift IPA, families like the Martins in rural Vermont can count on fresh produce and protein each week. 'After my husband's job loss, the food shelf kept our kids fed while we got back on our feet.'",
                image: "https://images.unsplash.com/photo-1593113598332-cd288d649433?w=400&h=200&fit=crop",
                url: "https://vtfoodbank.org",
                donateUrl: "https://vtfoodbank.org/give"
            },
            {
                name: "Upper Valley Haven",
                category: "community",
                lat: 43.6489,
                lng: -72.3212,
                location: "White River Junction, VT",
                description: "Providing food, shelter, education, and service coordination for families and individuals in need in the Upper Valley.",
                impact: "2024 Sunshine Fund recipient. The Haven helped Sarah, a single mom, transition from their shelter to stable housing. 'They didn't just give me a roof - they helped me build a future for my daughter.'",
                image: "https://images.unsplash.com/photo-1532629345422-7515f3d16bb6?w=400&h=200&fit=crop",
                url: "https://uppervalleyhaven.org",
                donateUrl: "https://uppervalleyhaven.org/donate"
            },
            {
                name: "Committee on Temporary Shelter (COTS)",
                category: "community",
                lat: 44.4759,
                lng: -73.2121,
                location: "Burlington, VT",
                description: "Working to end homelessness in Vermont through shelter, housing, and prevention services since 1982.",
                impact: "2024 Sunshine Fund recipient. Last winter, COTS helped 47 people find permanent housing. James, a veteran, says: 'COTS gave me more than shelter. They gave me back my dignity and a place to call home.'",
                image: "https://images.unsplash.com/photo-1469571486292-0ba58a3f068b?w=400&h=200&fit=crop",
                url: "https://cotsonline.org",
                donateUrl: "https://cotsonline.org/donate"
            },
            {
                name: "Green Mountain Farm-to-School",
                category: "community",
                lat: 44.0354,
                lng: -73.1795,
                location: "Newport, VT",
                description: "Connecting Vermont farms with schools to provide fresh, local food while teaching kids about nutrition and agriculture.",
                impact: "2024 Sunshine Fund recipient. Thanks to their programs, students in Orleans County now grow vegetables in school gardens. Teacher Amy shares: 'Kids who never touched a vegetable are now excited to eat what they planted.'",
                image: "https://images.unsplash.com/photo-1574943320219-553eb213f72d?w=400&h=200&fit=crop",
                url: "https://greenmountainfarmtoschool.org",
                donateUrl: "https://greenmountainfarmtoschool.org/donate"
            },
            {
                name: "Friends of the Winooski River",
                category: "community",
                lat: 44.4875,
                lng: -72.8899,
                location: "Montpelier, VT",
                description: "Protecting and restoring the Winooski River watershed through education, advocacy, and community engagement.",
                impact: "2024 Sunshine Fund recipient. Their river cleanup events have removed tons of debris while educating hundreds of volunteers. 'Every paddle on the Winooski is cleaner because of their work,' says kayaker Tom.",
                image: "https://images.unsplash.com/photo-1504893524553-b855bce32c67?w=400&h=200&fit=crop",
                url: "https://winooskiriver.org",
                donateUrl: "https://winooskiriver.org/donate"
            },
            {
                name: "Vermont Community Foundation",
                category: "community",
                lat: 44.2598,
                lng: -72.5754,
                location: "Middlebury, VT",
                description: "Partner for the inaugural SIPosium, supporting Vermont's flood recovery and building community resilience across the state.",
                impact: "After devastating floods, the Foundation mobilized rapid response grants. Homeowner Maria recalls: 'Within days of losing everything, we had help rebuilding. The Vermont spirit is real.'",
                image: "https://images.unsplash.com/photo-1559027615-cd4628902d4a?w=400&h=200&fit=crop",
                url: "https://vermontcf.org",
                donateUrl: "https://vermontcf.org/give"
            },
            {
                name: "Northeast Kingdom Community Action (NEKCA)",
                category: "community",
                lat: 44.5342,
                lng: -72.0196,
                location: "St. Johnsbury, VT",
                description: "Fighting poverty and building community in Vermont's Northeast Kingdom through comprehensive support services.",
                impact: "2024 Sunshine Fund recipient. NEKCA's heating assistance kept 200+ families warm last winter. 'Choosing between heat and food shouldn't happen in Vermont,' says director Lisa. 'We make sure it doesn't.'",
                image: "https://images.unsplash.com/photo-1488521787991-ed7bbaae773c?w=400&h=200&fit=crop",
                url: "https://nekcavt.org",
                donateUrl: "https://nekcavt.org/donate"
            },

            // NEW HAMPSHIRE - Cosmic Shift Beneficiary
            {
                name: "NH Food Alliance",
                category: "community",
                lat: 43.2081,
                lng: -71.5376,
                location: "Concord, NH",
                description: "Building a thriving, fair, and sustainable food system in New Hampshire by connecting farmers, food banks, and communities.",
                impact: "Cosmic Shift IPA beneficiary. The Alliance helped launch 12 new farm-to-food-bank partnerships. Farmer Jake says: 'Now my extra harvest feeds families instead of going to waste. It's farming with purpose.'",
                image: "https://images.unsplash.com/photo-1500937386664-56d1dfef3854?w=400&h=200&fit=crop",
                url: "https://nhfoodalliance.org",
                donateUrl: "https://nhfoodalliance.org/donate"
            },

            // MAINE - Cosmic Shift Beneficiary
            {
                name: "Cultivating Community",
                category: "community",
                lat: 43.6591,
                lng: -70.2568,
                location: "Portland, ME",
                description: "Growing food, farmers, and community through urban agriculture programs that serve immigrant and refugee communities.",
                impact: "Cosmic Shift IPA beneficiary. Their refugee farming program has helped 50+ families grow food from their homelands. Amara, from Somalia, shares: 'This garden connects me to home while feeding my children here.'",
                image: "https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=400&h=200&fit=crop",
                url: "https://cultivatingcommunity.org",
                donateUrl: "https://cultivatingcommunity.org/donate"
            },

            // MASSACHUSETTS - Cosmic Shift Beneficiary
            {
                name: "Spoonfuls (Lovin' Spoonfuls)",
                category: "community",
                lat: 42.3376,
                lng: -71.2087,
                location: "Newton, MA",
                description: "New England's largest food rescue operation, preventing 5M+ pounds of fresh food from going to waste each year.",
                impact: "Cosmic Shift IPA beneficiary. Their trucks rescue food daily from grocery stores and restaurants. Shelter director Mike says: 'Spoonfuls brings us restaurant-quality food. Our guests eat with dignity.'",
                image: "https://images.unsplash.com/photo-1593113616828-6f22bca04804?w=400&h=200&fit=crop",
                url: "https://spoonfuls.org",
                donateUrl: "https://spoonfuls.org/donate"
            },

            // RHODE ISLAND - Cosmic Shift Beneficiary
            {
                name: "Rhode Island Community Food Bank",
                category: "community",
                lat: 41.8176,
                lng: -71.3743,
                location: "Providence, RI",
                description: "Fighting hunger and improving lives by providing nutritious food to Rhode Islanders facing food insecurity.",
                impact: "Cosmic Shift IPA beneficiary. They distributed 18 million pounds of food last year. Grandmother Rosa shares: 'When times get hard, the food bank is there. My grandkids never go to bed hungry.'",
                image: "https://images.unsplash.com/photo-1488459716781-31db52582fe9?w=400&h=200&fit=crop",
                url: "https://rifoodbank.org",
                donateUrl: "https://rifoodbank.org/donate"
            },

            // CONNECTICUT - Cosmic Shift Beneficiary
            {
                name: "Alzheimer's Association - CT Chapter",
                category: "community",
                lat: 41.3651,
                lng: -72.9275,
                location: "New Haven, CT",
                description: "Leading the way in Alzheimer's care, support, and research - providing resources for patients and their families.",
                impact: "Cosmic Shift IPA beneficiary. Their support groups help caregivers cope. David, caring for his wife, says: 'I thought I was alone until I found this community. Now I have strength to keep going.'",
                image: "https://images.unsplash.com/photo-1576765608535-5f04d1e3f289?w=400&h=200&fit=crop",
                url: "https://alz.org/ct",
                donateUrl: "https://act.alz.org/donate"
            },

            // NEW YORK - Cosmic Shift Beneficiaries
            {
                name: "City Harvest",
                category: "community",
                lat: 40.7549,
                lng: -73.9840,
                location: "New York, NY",
                description: "NYC's largest food rescue organization, collecting excess food and delivering it to soup kitchens, food pantries, and community programs.",
                impact: "Cosmic Shift IPA beneficiary. Their trucks rescue 70 million pounds of food annually. Chef Marcus volunteers weekly: 'Food that would be thrown away instead feeds thousands. That's the magic of City Harvest.'",
                image: "https://images.unsplash.com/photo-1593113630400-ea4288922497?w=400&h=200&fit=crop",
                url: "https://cityharvest.org",
                donateUrl: "https://cityharvest.org/donate"
            },
            {
                name: "United Way of Greater Rochester",
                category: "community",
                lat: 43.1566,
                lng: -77.6088,
                location: "Rochester, NY",
                description: "Building stronger communities through education, financial stability, and health initiatives across the Finger Lakes region.",
                impact: "Cosmic Shift IPA beneficiary. Their early literacy programs have helped 3,000+ kids start school ready to learn. Teacher Patricia notes: 'The difference is clear on day one. These kids are confident and curious.'",
                image: "https://images.unsplash.com/photo-1509062522246-3755977927d7?w=400&h=200&fit=crop",
                url: "https://unitedwayrocflx.org",
                donateUrl: "https://unitedwayrocflx.org/donate"
            },

            // NEW JERSEY - Cosmic Shift Beneficiary
            {
                name: "Community FoodBank of New Jersey",
                category: "community",
                lat: 40.7101,
                lng: -74.2097,
                location: "Hillside, NJ",
                description: "Fighting hunger and poverty in New Jersey, distributing food to over 800 partner agencies across the state.",
                impact: "Cosmic Shift IPA beneficiary. They provide 90 million meals annually. Single dad Robert shares: 'The food bank doesn't just fill our fridge - it lets me be a better father because I'm not worried about dinner.'",
                image: "https://images.unsplash.com/photo-1578357078586-491adf1aa5ba?w=400&h=200&fit=crop",
                url: "https://cfbnj.org",
                donateUrl: "https://cfbnj.org/donate"
            },

            // PENNSYLVANIA - Cosmic Shift Beneficiary
            {
                name: "Philabundance",
                category: "community",
                lat: 39.9153,
                lng: -75.1566,
                location: "Philadelphia, PA",
                description: "The Delaware Valley's largest hunger relief organization, serving 135,000+ people weekly through 350 agency partners.",
                impact: "Cosmic Shift IPA beneficiary. Their Community Kitchen also trains formerly incarcerated individuals for culinary careers. Graduate Jerome says: 'They gave me skills and a second chance. Now I'm a sous chef.'",
                image: "https://images.unsplash.com/photo-1541014741259-de529411b96a?w=400&h=200&fit=crop",
                url: "https://philabundance.org",
                donateUrl: "https://philabundance.org/donate"
            },

            // VIRGINIA - Conservation Partner
            {
                name: "James River Association",
                category: "community",
                lat: 37.5328,
                lng: -77.4360,
                location: "Richmond, VA",
                description: "Protecting and restoring Virginia's historic James River watershed from the mountains to the Chesapeake Bay since 1976.",
                impact: "Their paddle trips connect thousands with the river each year. Kayaker Christine says: 'I never knew Richmond had such an amazing river until JRA showed me. Now I'm a volunteer river cleaner.'",
                image: "https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=400&h=200&fit=crop",
                url: "https://thejamesriver.org",
                donateUrl: "https://thejamesriver.org/donate"
            },

            // NORTH CAROLINA - Conservation & Food Security Partners
            {
                name: "Blue Ridge Parkway Foundation",
                category: "community",
                lat: 35.5682,
                lng: -82.5315,
                location: "Asheville, NC",
                description: "Preserving America's Favorite Drive by supporting trails, overlooks, and visitor experiences along 469 miles of scenic mountain road.",
                impact: "Their trail crews maintain hundreds of miles of hiking paths. Volunteer Sam shares: 'Every weekend, we're out there clearing trails so families can enjoy these views for generations to come.'",
                image: "https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?w=400&h=200&fit=crop",
                url: "https://brpfoundation.org",
                donateUrl: "https://brpfoundation.org/donate"
            },
            {
                name: "French Broad Riverkeeper (MountainTrue)",
                category: "community",
                lat: 35.5946,
                lng: -82.5516,
                location: "Asheville, NC",
                description: "Protecting the waters of the French Broad River watershed through monitoring, advocacy, and community engagement.",
                impact: "Their water quality testing and advocacy has made the French Broad swimmable again. Paddler Jen says: 'I remember when no one would touch this water. Now my kids swim here every summer.'",
                image: "https://images.unsplash.com/photo-1468413253725-0d5181091126?w=400&h=200&fit=crop",
                url: "https://mountaintrue.org",
                donateUrl: "https://mountaintrue.org/donate"
            },
            {
                name: "MANNA FoodBank",
                category: "community",
                lat: 35.5781,
                lng: -82.5024,
                location: "Asheville, NC",
                description: "Ending hunger in Western North Carolina by distributing 50,000+ pounds of food daily through 200+ partner organizations.",
                impact: "After Hurricane Helene, MANNA mobilized emergency food distribution to hard-hit communities. Recipient Angela says: 'We lost everything, but MANNA made sure we didn't lose hope. Hot meals meant the world.'",
                image: "https://images.unsplash.com/photo-1594708767771-a7502f8a2e7c?w=400&h=200&fit=crop",
                url: "https://mannafoodbank.org",
                donateUrl: "https://mannafoodbank.org/donate"
            }
        ];

        // Create layer groups for each category
        const layers = {
            retailer: L.layerGroup(),
            trail: L.layerGroup(),
            river: L.layerGroup(),
            community: L.layerGroup()
        };

        // Add markers to respective layers
        sunshineSpots.forEach(spot => {
            const icon = createMarkerIcon(spot.category);

            // Build popup content with enhanced information for community partners
            let popupContent = '';

            // Add image if available
            if (spot.image) {
                popupContent += `<img src="${spot.image}" alt="${spot.name}" class="popup-image" loading="lazy">`;
            }

            popupContent += `
                <div class="popup-category ${spot.category}">${spot.category === 'community' ? 'Community Partner' : spot.category}</div>
                <div class="popup-title">${spot.name}</div>
                <div class="popup-description">${spot.description}</div>
                <div class="popup-location">${spot.location}</div>
            `;

            // Add impact story for community partners
            if (spot.impact) {
                popupContent += `
                    <div class="popup-impact">
                        <div class="popup-impact-label">Impact Story</div>
                        ${spot.impact}
                    </div>
                `;
            }

            // Add buttons
            if (spot.url || spot.donateUrl) {
                popupContent += '<div class="popup-buttons">';
                if (spot.url) {
                    popupContent += `<a href="${spot.url}" target="_blank" rel="noopener noreferrer" class="popup-btn popup-btn-primary">Learn More</a>`;
                }
                if (spot.donateUrl) {
                    popupContent += `<a href="${spot.donateUrl}" target="_blank" rel="noopener noreferrer" class="popup-btn popup-btn-secondary">Donate</a>`;
                }
                popupContent += '</div>';
            }

            const marker = L.marker([spot.lat, spot.lng], { icon: icon })
                .bindPopup(popupContent, { maxWidth: 320 });

            layers[spot.category].addLayer(marker);
        });

        // Add all layers to map
        Object.values(layers).forEach(layer => layer.addTo(map));

        // Update counts
        function updateCounts() {
            document.getElementById('count-retailers').textContent = sunshineSpots.filter(s => s.category === 'retailer').length;
            document.getElementById('count-trails').textContent = sunshineSpots.filter(s => s.category === 'trail').length;
            document.getElementById('count-rivers').textContent = sunshineSpots.filter(s => s.category === 'river').length;
            document.getElementById('count-community').textContent = sunshineSpots.filter(s => s.category === 'community').length;
        }
        updateCounts();

        // Filter functionality
        document.getElementById('filter-retailers').addEventListener('change', function() {
            if (this.checked) {
                map.addLayer(layers.retailer);
            } else {
                map.removeLayer(layers.retailer);
            }
        });

        document.getElementById('filter-trails').addEventListener('change', function() {
            if (this.checked) {
                map.addLayer(layers.trail);
            } else {
                map.removeLayer(layers.trail);
            }
        });

        document.getElementById('filter-rivers').addEventListener('change', function() {
            if (this.checked) {
                map.addLayer(layers.river);
            } else {
                map.removeLayer(layers.river);
            }
        });

        document.getElementById('filter-community').addEventListener('change', function() {
            if (this.checked) {
                map.addLayer(layers.community);
            } else {
                map.removeLayer(layers.community);
            }
        });

        // Fit map to show all markers with smooth animation
        const allMarkers = sunshineSpots.map(s => [s.lat, s.lng]);
        map.fitBounds(allMarkers, {
            padding: [50, 50],
            animate: true,
            duration: 1.0
        });
    </script>
</body>
</html>
